import{r as m,m as O,j as e,L as R,S as V}from"./app-6Tb5ZP8Z.js";import{L as x,I as g}from"./label-BCC2L03O.js";import{B as _,c as Y,t as w}from"./app-logo-icon-DuFZg3_n.js";import{D as $,a as X,b as k,c as q,d as G}from"./dialog-Dx-d2A6b.js";import{I as D}from"./input-Tv1L73iO.js";import{S as I,a as B,b as L,c as H,d as z}from"./select-rOePYllV.js";import{P as J}from"./pencil-CtJibt0m.js";import{P as K}from"./plus-CxL6ZB3o.js";import{H as Q}from"./heading-small-CFFQrvtw.js";import{B as W}from"./badge-DnUI-tbF.js";import{T as Z,a as ee,b as f,c as h,d as ae,e as c}from"./table-BV1WF4_B.js";import{A as se,C as re}from"./app-layout-D9kDhLsM.js";import{S as te}from"./layout-Z7KTUzuO.js";import{C as le}from"./calendar-BhVUqbrg.js";import{T as de}from"./trash-2-m9VHYhKS.js";/* empty css            */import"./index-B0gXBjpX.js";import"./check-DFbbQ8R1.js";import"./heading-rK8wV4GB.js";const A=({version:a,carModels:l,brands:o})=>{var S,C;console.log(l);const t=!!a,[s,d]=m.useState(!1),[n,p]=m.useState(""),{data:u,setData:i,post:E,processing:b,errors:j,clearErrors:y,reset:N}=O({_method:t?"patch":void 0,version_name:(a==null?void 0:a.version_name)??"",version_year:((S=a==null?void 0:a.version_year)==null?void 0:S.toString())??"",car_model_id:((C=a==null?void 0:a.car_model_id)==null?void 0:C.toString())??""}),F=m.useMemo(()=>l.filter(r=>r.brand_id.toString()===n),[n,l]);m.useEffect(()=>{var r,v;if(s){const T=l.find(M=>M.id===(a==null?void 0:a.car_model_id)),P=T?T.brand_id.toString():"";p(P),i({_method:t?"patch":void 0,version_name:(a==null?void 0:a.version_name)??"",version_year:((r=a==null?void 0:a.version_year)==null?void 0:r.toString())??"",car_model_id:((v=a==null?void 0:a.car_model_id)==null?void 0:v.toString())??""}),y()}else t||(N(),p(""))},[s,t,a,l,i,y,N]);const U=r=>{r.preventDefault(),E(route(t?"carversion.update":"carversion.store",a==null?void 0:a.id),{onSuccess:()=>d(!1)})};return e.jsxs($,{open:s,onOpenChange:d,children:[e.jsx(X,{asChild:!0,children:e.jsx(_,{variant:t?"outline":"default",size:t?"icon":"default",children:t?e.jsx(J,{className:"h-4 w-4"}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"mr-2 h-4 w-4"})," Add Version"]})})}),e.jsxs(k,{className:"sm:max-w-[450px]",children:[e.jsx(q,{children:e.jsx(G,{children:t?"Update Version":"Create Version"})}),e.jsxs("form",{onSubmit:U,className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"1. Select Brand"}),e.jsxs(I,{value:n,onValueChange:r=>{p(r),i("car_model_id","")},children:[e.jsx(B,{children:e.jsx(L,{placeholder:"Choose a brand..."})}),e.jsx(H,{children:o.map(r=>e.jsx(z,{value:r.id.toString(),children:r.brand_name},r.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"2. Select Model"}),e.jsxs(I,{value:u.car_model_id,onValueChange:r=>i("car_model_id",r),disabled:!n,children:[e.jsx(B,{children:e.jsx(L,{placeholder:n?"Choose a model...":"Select brand first"})}),e.jsx(H,{children:F.map(r=>e.jsx(z,{value:r.id.toString(),children:r.model_name},r.id))})]}),e.jsx(g,{message:j.car_model_id})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"version_name",children:"Version Name"}),e.jsx(D,{id:"version_name",placeholder:"e.g. XLE",value:u.version_name,onChange:r=>i("version_name",r.target.value)}),e.jsx(g,{message:j.version_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"version_year",children:"Year"}),e.jsx(D,{id:"version_year",placeholder:"e.g. 2024",value:u.version_year,onChange:r=>i("version_year",r.target.value)}),e.jsx(g,{message:j.version_year})]})]}),e.jsx(_,{disabled:b,className:"w-full",children:b?"Savingâ€¦":t?"Update Version":"Create Version"})]})]})]})};function ie({className:a,...l}){return e.jsx("div",{"data-slot":"card",className:Y("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...l})}const ne=[{title:"Car settings",href:"/car/settings/brand"},{title:"Versions",href:"/car/settings/version"}];function we({versions:a,carModels:l,brands:o}){const t=s=>{confirm("Are you sure? This action cannot be undone.")&&V.delete(route("carversion.destroy",s),{preserveScroll:!0})};return e.jsxs(se,{breadcrumbs:ne,children:[e.jsx(R,{title:"Version Settings"}),e.jsx(te,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 border-b pb-6",children:[e.jsx(Q,{title:"Car Versions",description:"Manage your vehicle specific trim levels and years."}),e.jsx(A,{carModels:l,brands:o})]}),e.jsx(ie,{className:"overflow-hidden border-none shadow-sm ring-1 ring-border",children:e.jsxs(Z,{children:[e.jsx(ee,{className:"bg-muted/50",children:e.jsxs(f,{children:[e.jsx(h,{className:"font-semibold",children:"Version & Year"}),e.jsx(h,{className:"font-semibold",children:"Model Hierarchy"}),e.jsx(h,{className:"font-semibold",children:"Timestamps"}),e.jsx(h,{className:"text-right font-semibold",children:"Actions"})]})}),e.jsx(ae,{children:a.data.length>0?a.data.map(s=>{var d;return e.jsxs(f,{className:"group transition-colors",children:[e.jsx(c,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-foreground",children:s.version_name.toUpperCase()}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[e.jsx(le,{className:"mr-1 size-3"}),s.version_year]})]})}),e.jsx(c,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{variant:"outline",className:"font-normal border-primary/20 bg-primary/5 text-primary",children:(d=s.car_model.brand)==null?void 0:d.brand_name}),e.jsx("span",{className:"text-muted-foreground",children:"/"}),e.jsx("span",{className:"font-medium",children:s.car_model.model_name})]})}),e.jsx(c,{children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Added: ",w(s.created_at)]}),e.jsxs("p",{className:"text-[10px] text-muted-foreground/70 italic",children:["Updated: ",w(s.updated_at)]})]})}),e.jsx(c,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(A,{version:s,carModels:l,brands:o}),e.jsx(_,{variant:"ghost",size:"icon",className:"text-destructive hover:bg-destructive/10 hover:text-destructive",onClick:()=>t(s.id),children:e.jsx(de,{className:"size-4"})})]})})]},s.id)}):e.jsx(f,{children:e.jsx(c,{colSpan:4,className:"h-32 text-center text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(re,{className:"size-8 opacity-20"}),e.jsx("p",{children:"No car versions found."})]})})})})]})}),a.links&&a.links.length>3&&e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx("nav",{className:"inline-flex -space-x-px rounded-md shadow-sm",children:a.links.map((s,d)=>e.jsx("button",{onClick:()=>s.url&&V.get(s.url),disabled:!s.url||s.active,className:`px-4 py-2 text-sm font-medium transition-colors border first:rounded-l-md last:rounded-r-md 
                                            ${s.active?"bg-primary text-primary-foreground border-primary z-10":"bg-background text-muted-foreground hover:bg-muted border-input"} ${!s.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},d))})})]})})]})}export{we as default};
