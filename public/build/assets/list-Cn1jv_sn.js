import{m as $,j as s,L as z,S as E}from"./app-D9b7yil5.js";import{A as F}from"./app-layout-lUKL1h8K.js";import{L as O}from"./layout-DHpDXm84.js";import{T as U,a as q,b as N,c,d as J,e as n}from"./table-DsQtr8xT.js";import{a as K,B as v}from"./app-logo-icon-BTR4zcqo.js";import{B as f}from"./badge-B_-_Rt-_.js";import{D as Q,a as W,b as X,c as Y,d as Z}from"./dialog-D1i5YGBp.js";import{I as D}from"./input-B72JrJ1W.js";import{L as l}from"./label-BjwQr2PU.js";import{S as p,a as j,b as u,c as g,d as _}from"./select-p1MIQY3c.js";import{I as T}from"./input-error-s3OvvhyU.js";import{P as ss}from"./pencil-CpbSHt1Z.js";import{P as es,T as is}from"./trash-2-D5D9zQ_C.js";import{A as rs}from"./anchor-RxqgCmAY.js";import{S as L}from"./ship-B710Oo-Y.js";import{T as ts}from"./truck-B7wlz0Cp.js";/* empty css            */import"./index-CFDuspEi.js";import"./check-BcQx4ZQH.js";import"./heading-DtOTHioi.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ns=K("ArrowRight",os),A=({rate:i,countries:a,ports:d})=>{var S,w,C,R;const o=!!i,{data:r,setData:t,post:h,patch:x,processing:k,errors:b,reset:I}=$({transport_mode:(i==null?void 0:i.transport_mode)||"sea",from_country_id:((S=i==null?void 0:i.from_country)==null?void 0:S.id.toString())||"",from_port_id:((w=i==null?void 0:i.from_port)==null?void 0:w.id.toString())||"",to_country_id:((C=i==null?void 0:i.to_country)==null?void 0:C.id.toString())||"",to_port_id:((R=i==null?void 0:i.to_port)==null?void 0:R.id.toString())||"",price_roro:(i==null?void 0:i.price_roro)||"",price_container:(i==null?void 0:i.price_container)||"",is_current:(i==null?void 0:i.is_current)??!0}),B=d.filter(e=>e.country_id.toString()===r.from_country_id),y=a.find(e=>e.id.toString()===r.to_country_id),V=d.filter(e=>{var P;const m=e.country_id.toString()===r.to_country_id,H=(P=y==null?void 0:y.gateway_ports)==null?void 0:P.some(M=>M.id===e.id);return m||H}),G=e=>{e.preventDefault(),o?x(route("shipping-rates.update",i.id)):h(route("shipping-rates.store"),{onSuccess:()=>I()})};return s.jsxs(Q,{children:[s.jsx(W,{asChild:!0,children:s.jsx(v,{variant:o?"ghost":"default",size:o?"icon":"sm",children:o?s.jsx(ss,{className:"w-4 h-4"}):s.jsxs(s.Fragment,{children:[s.jsx(es,{className:"mr-2 h-4 w-4"})," Add Rate"]})})}),s.jsxs(X,{className:"sm:max-w-[550px]",children:[s.jsx(Y,{children:s.jsx(Z,{children:o?"Edit Shipping Route":"Add New Shipping Route"})}),s.jsxs("form",{onSubmit:G,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold  uppercase tracking-wider",children:[s.jsx(rs,{className:"w-4 h-4"})," Departure (Origin)"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{children:"Origin Country"}),s.jsxs(p,{value:r.from_country_id,onValueChange:e=>{t(m=>({...m,from_country_id:e,from_port_id:""}))},children:[s.jsx(j,{children:s.jsx(u,{placeholder:"Select Country"})}),s.jsx(g,{children:a.map(e=>s.jsx(_,{value:e.id.toString(),children:e.country_name},e.id))})]}),s.jsx(T,{message:b.from_country_id})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{children:"Departure Port"}),s.jsxs(p,{value:r.from_port_id,onValueChange:e=>t("from_port_id",e),disabled:!r.from_country_id,children:[s.jsx(j,{children:s.jsx(u,{placeholder:"Select Port"})}),s.jsx(g,{children:B.map(e=>s.jsx(_,{value:e.id.toString(),children:e.name},e.id))})]}),s.jsx(T,{message:b.from_port_id})]})]})]}),s.jsxs("div",{className:"space-y-4 p-4  bg-gray-50 rounded-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold uppercase tracking-wider",children:[s.jsx(L,{className:"w-4 h-4"})," Arrival (Destination)"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{children:"Dest. Country"}),s.jsxs(p,{value:r.to_country_id,onValueChange:e=>{t(m=>({...m,to_country_id:e,to_port_id:""}))},children:[s.jsx(j,{children:s.jsx(u,{placeholder:"Select Country"})}),s.jsx(g,{children:a.map(e=>s.jsx(_,{value:e.id.toString(),children:e.country_name},e.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{children:"Arrival Port/Gateway"}),s.jsxs(p,{value:r.to_port_id,onValueChange:e=>t("to_port_id",e),disabled:!r.to_country_id,children:[s.jsx(j,{children:s.jsx(u,{placeholder:"Select Port"})}),s.jsx(g,{children:V.map(e=>s.jsx(_,{value:e.id.toString(),children:s.jsxs("div",{className:"flex items-center justify-between w-full gap-2",children:[s.jsx("span",{children:e.name}),e.country_id.toString()!==r.to_country_id&&s.jsx(f,{variant:"outline",className:"text-[9px] bg-white",children:"Gateway"})]})},e.id))})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{children:"RoRo Price ($)"}),s.jsx(D,{type:"number",value:r.price_roro,onChange:e=>t("price_roro",e.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{children:"Container ($)"}),s.jsx(D,{type:"number",value:r.price_container,onChange:e=>t("price_container",e.target.value)})]})]}),s.jsx(v,{type:"submit",className:"w-full",disabled:k,children:"Save Shipping Route"})]})]})]})};function Rs({shipping_rates:i,countries:a,ports:d}){const o=r=>{confirm("Delete this shipping route?")&&E.delete(route("shipping-rates.destroy",r))};return s.jsxs(F,{children:[s.jsx(z,{title:"Ocean Freight Rates"}),s.jsxs(O,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Shipping Rates"}),s.jsx("p",{className:"text-muted-foreground",children:"Define ocean freight costs from global origins to entry ports."})]}),s.jsx(A,{countries:a,ports:d})]}),s.jsx("div",{className:"rounded-md border bg-white overflow-hidden",children:s.jsxs(U,{children:[s.jsx(q,{className:"bg-slate-50",children:s.jsxs(N,{children:[s.jsx(c,{children:"Route Path"}),s.jsx(c,{children:"Mode"}),s.jsx(c,{children:"RoRo Price"}),s.jsx(c,{children:"Container Price"}),s.jsx(c,{children:"Status"}),s.jsx(c,{className:"text-right",children:"Actions"})]})}),s.jsx(J,{children:i.length>0?i.map(r=>{var t,h,x;return s.jsxs(N,{className:"hover:bg-slate-50/50",children:[s.jsx(n,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-semibold",children:(t=r.from_country)==null?void 0:t.country_name}),s.jsx(ns,{className:"w-3 h-3 text-slate-400"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm font-medium text-blue-600",children:((h=r.to_port)==null?void 0:h.name)||((x=r.to_country)==null?void 0:x.country_name)}),s.jsx("span",{className:"text-[10px] text-slate-400 uppercase",children:"Gateway"})]})]})}),s.jsx(n,{children:s.jsxs(f,{variant:"outline",className:"gap-1 font-normal",children:[r.transport_mode==="sea"?s.jsx(L,{className:"w-3 h-3"}):s.jsx(ts,{className:"w-3 h-3"}),r.transport_mode.toUpperCase()]})}),s.jsxs(n,{className:"font-mono font-bold text-slate-700",children:["$",r.price_roro]}),s.jsxs(n,{className:"font-mono font-bold text-slate-700",children:["$",r.price_container]}),s.jsx(n,{children:r.is_current?s.jsx(f,{className:"bg-green-600 hover:bg-green-600",children:"Active"}):s.jsx(f,{variant:"secondary",children:"History"})}),s.jsx(n,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-1",children:[s.jsx(A,{rate:r,countries:a,ports:d}),s.jsx(v,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-red-600",onClick:()=>o(r.id),children:s.jsx(is,{className:"w-4 h-4"})})]})})]},r.id)}):s.jsx(N,{children:s.jsx(n,{colSpan:6,className:"h-32 text-center text-slate-500",children:"No shipping rates found. Configure your first route to start calculations."})})})]})})]})]})}export{Rs as default};
