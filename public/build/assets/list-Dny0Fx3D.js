import{j as e,r as x,S as h,R as b,L as w}from"./app-P_30Ywqc.js";import{D as v,e as S,b as C,f as N,d as y,g as P,h as D,A as R}from"./app-layout-DuYsczsc.js";import{T,a as I,b as p,c as L,d as M,e as m}from"./table-DwB0cqgP.js";import{S as z,u as _,C as k,b as O,c as V,a as E,f as j,g as B}from"./index-C7WiWO3E.js";import{I as G}from"./input-DAF9M8uG.js";import{B as u}from"./app-logo-icon-D0-bOfxz.js";import{B as H}from"./badge-ipgmCuak.js";/* empty css            */import"./index-COjtLgPO.js";import"./check-Cy2qj5ij.js";function U({table:a}){return e.jsxs(v,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(u,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(z,{}),"View"]})}),e.jsxs(C,{align:"end",className:"w-[150px]",children:[e.jsx(N,{children:"Toggle columns"}),e.jsx(y,{}),a.getAllColumns().filter(s=>typeof s.accessorFn<"u"&&s.getCanHide()).map(s=>e.jsx(P,{className:"capitalize",checked:s.getIsVisible(),onCheckedChange:n=>s.toggleVisibility(!!n),children:s.id},s.id))]})]})}function A({table:a,filters:s}){const[n,g]=x.useState((s==null?void 0:s.search)??""),l=_(n,500),i=x.useRef(!0);return x.useEffect(()=>{if(i.current){i.current=!1;return}const c=new URL(window.location.href),r=Object.fromEntries(c.searchParams.entries());l?(r.search=l,r.page="1"):delete r.search,h.get(route(route().current()??"order.index"),r,{preserveState:!0,preserveScroll:!0,replace:!0})},[l]),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(G,{placeholder:"Search by order ID",value:n,onChange:c=>g(c.target.value),className:"w-[250px]"}),e.jsx(U,{table:a})]})}function F({table:a}){const{pageIndex:s}=a.getState().pagination;return e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"text-muted-foreground flex-1 text-sm",children:["Page ",s+1," of ",a.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(u,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(0),disabled:!a.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(k,{})]}),e.jsxs(u,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(O,{})]}),e.jsxs(u,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(D,{})]}),e.jsxs(u,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(a.getPageCount()-1),disabled:!a.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(V,{})]})]})]})}function K({columns:a,data:s,serverPagination:n,onServerPageChange:g,filters:l}){const[i,c]=b.useState(l!=null&&l.sort?[{id:String(l.sort),desc:l.direction==="desc"}]:[]),r=E({data:s,columns:a,getCoreRowModel:B(),manualPagination:!0,manualSorting:!0,enableMultiSort:!0,pageCount:n.pageCount,onSortingChange:o=>{const t=typeof o=="function"?o(i):o;c(t);const f=new URL(window.location.href),d=Object.fromEntries(f.searchParams.entries());t.length?(d.sort=t[0].id,d.direction=t[0].desc?"desc":"asc",d.page="1"):(delete d.sort,delete d.direction),h.get(route(route().current()??"order.index"),d,{preserveState:!0,preserveScroll:!0,replace:!0})},onPaginationChange:o=>{const t=typeof o=="function"?o({pageIndex:n.pageIndex,pageSize:n.pageSize}):o;g(t.pageIndex+1,t.pageSize)},state:{sorting:i,pagination:{pageIndex:n.pageIndex,pageSize:n.pageSize}}});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(A,{table:r,filters:l}),e.jsx("div",{className:"rounded-md border bg-white shadow-sm overflow-hidden",children:e.jsxs(T,{children:[e.jsx(I,{className:"bg-slate-50",children:r.getHeaderGroups().map(o=>e.jsx(p,{children:o.headers.map(t=>e.jsx(L,{className:"text-slate-700 font-semibold",children:t.isPlaceholder?null:j(t.column.columnDef.header,t.getContext())},t.id))},o.id))}),e.jsx(M,{children:r.getRowModel().rows.length>0?r.getRowModel().rows.map(o=>e.jsx(p,{className:"hover:bg-slate-50/50",children:o.getVisibleCells().map(t=>e.jsx(m,{children:j(t.column.columnDef.cell,t.getContext())},t.id))},o.id)):e.jsx(p,{children:e.jsx(m,{colSpan:a.length,className:"h-24 text-center text-slate-500",children:"No results found."})})})]})}),e.jsx(F,{table:r})]})}const $=[{accessorKey:"order_number",header:"Order #",cell:({row:a})=>e.jsx("span",{className:"font-mono font-medium",children:a.getValue("order_number")})},{id:"vehicle",header:"Vehicle",cell:({row:a})=>{const s=a.original.vehicle;return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-slate-900",children:s.name}),e.jsx("span",{className:"text-xs text-slate-500",children:s.chassis_number})]})}},{accessorKey:"status",header:"Status",cell:({row:a})=>{const s=a.getValue("status"),n={pending:"bg-yellow-100 text-yellow-800 border-yellow-200",shipped:"bg-blue-100 text-blue-800 border-blue-200",delivered:"bg-green-100 text-green-800 border-green-200",cancelled:"bg-red-100 text-red-800 border-red-200"};return e.jsx(H,{variant:"outline",className:`capitalize ${n[s]||""}`,children:s})}},{id:"total",header:"Total (USD)",cell:({row:a})=>{const s=a.original.pricing;return e.jsxs("span",{className:"font-semibold",children:["$",s.total_amount.toLocaleString()]})}},{id:"date",header:"Date",accessorFn:a=>a.dates.created_at}];function te({orders:a,filters:s}){const n={pageIndex:a.current_page-1,pageSize:a.per_page,pageCount:a.last_page},g=(l,i)=>{const c=new URL(window.location.href),r=Object.fromEntries(c.searchParams.entries());r.page=String(l),r.per_page=String(i),h.get(route("order.index"),r,{preserveState:!0,preserveScroll:!0,replace:!0})};return e.jsxs(R,{children:[e.jsx(w,{title:"Orders Listings"}),e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Orders Inventory"})}),e.jsx(K,{columns:$,data:a.data,serverPagination:n,filters:s,onServerPageChange:g})]})]})}export{te as default};
