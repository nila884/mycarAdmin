import{r as w,m as I,j as e,L as O,S as $}from"./app-D9b7yil5.js";import{H as _}from"./heading-small-BU4M6w1f.js";import{A as z,X as M}from"./app-layout-lUKL1h8K.js";import{L as X}from"./layout-CyRbHjtb.js";import{T as q,f as G,a as J,b as u,c as d,d as K,e as r}from"./table-DsQtr8xT.js";import{B as c,t as N}from"./app-logo-icon-BTR4zcqo.js";import{D as S,a as y,b as D,c as T,d as L,e as Q,f as V,g as W}from"./dialog-D1i5YGBp.js";import{I as Y}from"./input-B72JrJ1W.js";import{L as g}from"./label-BjwQr2PU.js";import{I as C}from"./input-error-s3OvvhyU.js";import{C as Z}from"./checkbox-Dsx9yR5o.js";import{P as ee}from"./pencil-CpbSHt1Z.js";import{B as R}from"./badge-B_-_Rt-_.js";/* empty css            */import"./index-CFDuspEi.js";import"./check-BcQx4ZQH.js";import"./heading-DtOTHioi.js";const v=({role:s,permissions:n})=>{const[l,a]=w.useState(!1),t=!!s,P=t?`Update ${s==null?void 0:s.name}`:"Create New Role",A=t?"role.update":"role.store",B=t?"Update Role":"Create Role",{data:p,setData:f,post:F,patch:H,processing:m,errors:b}=I({name:(s==null?void 0:s.name)||"",permission:t?s.permissions.map(i=>i.id.toString()):[],_method:t?"patch":void 0}),U=i=>{i.preventDefault(),(t?H:F)(route(A,{role:s==null?void 0:s.id}),{onSuccess:()=>{a(!1)},onError:h=>{console.error("Submission error:",h)}})},k=(i,x)=>{f(h=>{let o=[...h.permission];const j=i.toString();return x?o.includes(j)||o.push(j):o=o.filter(E=>E!==j),{...h,permission:o}})};return e.jsxs(S,{open:l,onOpenChange:a,children:[e.jsx(y,{asChild:!0,children:e.jsx(c,{variant:t?"ghost":"outline",size:t?"icon":"default",children:t?e.jsx(ee,{className:"h-4 w-4"}):"Add New"})}),e.jsxs(D,{className:"sm:max-w-[700px]",children:[e.jsx(T,{children:e.jsx(L,{children:P})}),e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"name",children:"Role Name"}),e.jsx(Y,{id:"name",value:p.name,onChange:i=>f("name",i.target.value),disabled:m}),e.jsx(C,{message:b.name})]}),e.jsxs("div",{className:"grid gap-2 p-4 border rounded-lg bg-gray-50 max-h-96 overflow-y-auto",children:[e.jsx(g,{className:"text-lg font-semibold mb-2",children:"Assign Permissions"}),e.jsx(C,{message:b.permission}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Z,{id:`perm-${i.id}`,checked:p.permission.includes(i.id.toString()),onCheckedChange:x=>k(i.id,x),disabled:m}),e.jsx(g,{htmlFor:`perm-${i.id}`,className:"cursor-pointer text-sm font-medium leading-none",children:i.name})]},i.id))})]}),e.jsx(c,{type:"submit",disabled:m||!p.name,className:"w-full",children:m?"Submitting...":B})]})]})]})},se=({permissions:s})=>{const[n,l]=w.useState(!1);return e.jsx("div",{children:e.jsxs(S,{open:n,onOpenChange:l,children:[e.jsx(y,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"permissions"})}),e.jsxs(D,{className:"sm:max-w-md",children:[e.jsxs(T,{children:[e.jsx(L,{children:"Permissions"}),e.jsx(Q,{children:"Permissions List."})]}),e.jsx("div",{className:"flex items-center gap-2",children:s.map(a=>e.jsx(R,{variant:"secondary",children:a.name},a.id))}),e.jsx(V,{className:"sm:justify-start",children:e.jsx(W,{asChild:!0,children:e.jsx(c,{type:"button",variant:"secondary",children:"Close"})})})]})]})})},ae=[{title:"Role settings",href:"/management/role/list"}];function Ne({roles:s,permissions:n}){console.log(s.data);function l(a){window.confirm("Are you sure you want to delete this role?")&&$.delete(`/management/role/${a}`,{preserveScroll:!0,onSuccess:()=>{}})}return e.jsxs(z,{breadcrumbs:ae,children:[e.jsx(O,{title:"Role settings"}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{title:"Rrole settings",description:"Add new ,Update and delete roles name"}),e.jsx(v,{permissions:n}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(q,{className:" max-w-3xl",children:[e.jsx(G,{children:"A list of roles."}),e.jsx(J,{children:e.jsxs(u,{children:[e.jsx(d,{className:"w-[100px]",children:"role name"}),e.jsx(d,{children:"Permissions"}),e.jsx(d,{children:"Created at"}),e.jsx(d,{children:"Last update"}),e.jsx(d,{className:"text-right",children:"Action"})]})}),e.jsx(K,{children:s.data.length>0?s.data.map(a=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:a.name.toUpperCase()}),e.jsx(r,{className:"flex  flex-wrap gap-2",children:a.permissions.length===0?e.jsx(R,{variant:"secondary",children:"no permission"}):e.jsx(se,{permissions:a.permissions})}),e.jsx(r,{children:N(a.created_at)}),e.jsx(r,{children:N(a.updated_at)}),e.jsxs(r,{className:"text-right",children:[e.jsx(v,{role:a,permissions:n}),e.jsx(c,{className:"ml-2",size:"icon",variant:"destructive",onClick:()=>l(a.id),children:e.jsx(M,{className:"h-4 w-4"})})]})]},a.id)):e.jsx(u,{children:e.jsx(r,{colSpan:4,className:"text-center",children:"No role found."})})})]})})]})})]})}export{Ne as default};
