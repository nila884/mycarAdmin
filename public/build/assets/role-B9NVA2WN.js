import{r as w,j as e,m as I,L as O,S as $}from"./app-P_30Ywqc.js";import{H as _}from"./heading-small-CPs3tkTX.js";import{B as S}from"./badge-ipgmCuak.js";import{B as c,t as N}from"./app-logo-icon-D0-bOfxz.js";import{D as y,a as D,b as T,c as L,d as R,e as z,f as M,g as X}from"./dialog-CrpZ_p-3.js";import{L as u,I as C}from"./label-BF5kNt9L.js";import{C as q}from"./checkbox-DGbheN4K.js";import{I as G}from"./input-DAF9M8uG.js";import{P as J}from"./pencil-0Fym70Ww.js";import{T as K,f as Q,a as V,b as g,c as d,d as W,e as r}from"./table-DwB0cqgP.js";import{A as Y,X as Z}from"./app-layout-DuYsczsc.js";import{L as ee}from"./layout-BNnb3K59.js";/* empty css            */import"./index-COjtLgPO.js";import"./check-Cy2qj5ij.js";import"./heading-DeQyy-7-.js";const se=({permissions:s})=>{const[n,l]=w.useState(!1);return e.jsx("div",{children:e.jsxs(y,{open:n,onOpenChange:l,children:[e.jsx(D,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"permissions"})}),e.jsxs(T,{className:"sm:max-w-md",children:[e.jsxs(L,{children:[e.jsx(R,{children:"Permissions"}),e.jsx(z,{children:"Permissions List."})]}),e.jsx("div",{className:"flex items-center gap-2",children:s.map(a=>e.jsx(S,{variant:"secondary",children:a.name},a.id))}),e.jsx(M,{className:"sm:justify-start",children:e.jsx(X,{asChild:!0,children:e.jsx(c,{type:"button",variant:"secondary",children:"Close"})})})]})]})})},v=({role:s,permissions:n})=>{const[l,a]=w.useState(!1),t=!!s,P=t?`Update ${s==null?void 0:s.name}`:"Create New Role",A=t?"role.update":"role.store",B=t?"Update Role":"Create Role",{data:p,setData:f,post:F,patch:H,processing:m,errors:b}=I({name:(s==null?void 0:s.name)||"",permission:t?s.permissions.map(i=>i.id.toString()):[],_method:t?"patch":void 0}),U=i=>{i.preventDefault(),(t?H:F)(route(A,{role:s==null?void 0:s.id}),{onSuccess:()=>{a(!1)},onError:h=>{console.error("Submission error:",h)}})},k=(i,x)=>{f(h=>{let o=[...h.permission];const j=i.toString();return x?o.includes(j)||o.push(j):o=o.filter(E=>E!==j),{...h,permission:o}})};return e.jsxs(y,{open:l,onOpenChange:a,children:[e.jsx(D,{asChild:!0,children:e.jsx(c,{variant:t?"ghost":"outline",size:t?"icon":"default",children:t?e.jsx(J,{className:"h-4 w-4"}):"Add New"})}),e.jsxs(T,{className:"sm:max-w-[700px]",children:[e.jsx(L,{children:e.jsx(R,{children:P})}),e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"name",children:"Role Name"}),e.jsx(G,{id:"name",value:p.name,onChange:i=>f("name",i.target.value),disabled:m}),e.jsx(C,{message:b.name})]}),e.jsxs("div",{className:"grid max-h-96 gap-2 overflow-y-auto rounded-lg border bg-gray-50 p-4",children:[e.jsx(u,{className:"mb-2 text-lg font-semibold",children:"Assign Permissions"}),e.jsx(C,{message:b.permission}),e.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4",children:n.map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{id:`perm-${i.id}`,checked:p.permission.includes(i.id.toString()),onCheckedChange:x=>k(i.id,x),disabled:m}),e.jsx(u,{htmlFor:`perm-${i.id}`,className:"cursor-pointer text-sm leading-none font-medium",children:i.name})]},i.id))})]}),e.jsx(c,{type:"submit",disabled:m||!p.name,className:"w-full",children:m?"Submitting...":B})]})]})]})},ae=[{title:"Role settings",href:"/management/role/list"}];function be({roles:s,permissions:n}){console.log(s.data);function l(a){window.confirm("Are you sure you want to delete this role?")&&$.delete(`/management/role/${a}`,{preserveScroll:!0,onSuccess:()=>{}})}return e.jsxs(Y,{breadcrumbs:ae,children:[e.jsx(O,{title:"Role settings"}),e.jsx(ee,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{title:"Rrole settings",description:"Add new ,Update and delete roles name"}),e.jsx(v,{permissions:n}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(K,{className:"max-w-3xl",children:[e.jsx(Q,{children:"A list of roles."}),e.jsx(V,{children:e.jsxs(g,{children:[e.jsx(d,{className:"w-[100px]",children:"role name"}),e.jsx(d,{children:"Permissions"}),e.jsx(d,{children:"Created at"}),e.jsx(d,{children:"Last update"}),e.jsx(d,{className:"text-right",children:"Action"})]})}),e.jsx(W,{children:s.data.length>0?s.data.map(a=>e.jsxs(g,{children:[e.jsx(r,{className:"font-medium",children:a.name.toUpperCase()}),e.jsx(r,{className:"flex flex-wrap gap-2",children:a.permissions.length===0?e.jsx(S,{variant:"secondary",children:"no permission"}):e.jsx(se,{permissions:a.permissions})}),e.jsx(r,{children:N(a.created_at)}),e.jsx(r,{children:N(a.updated_at)}),e.jsxs(r,{className:"text-right",children:[e.jsx(v,{role:a,permissions:n}),e.jsx(c,{className:"ml-2",size:"icon",variant:"destructive",onClick:()=>l(a.id),children:e.jsx(Z,{className:"h-4 w-4"})})]})]},a.id)):e.jsx(g,{children:e.jsx(r,{colSpan:4,className:"text-center",children:"No role found."})})})]})})]})})]})}export{be as default};
