import{r as f,m as H,R as B,j as e,L as U,S as M}from"./app-6Tb5ZP8Z.js";import{H as O}from"./heading-small-CFFQrvtw.js";import{a as q,B as b,t as D}from"./app-logo-icon-DuFZg3_n.js";import{T as G,f as $,a as J,b as y,c,d as V,e as n}from"./table-BV1WF4_B.js";import{A as X,X as K}from"./app-layout-D9kDhLsM.js";import{S as Q}from"./layout-Z7KTUzuO.js";import{L as l,I as m}from"./label-BCC2L03O.js";import{D as W,a as Y,b as Z,c as ee,d as ae,e as se}from"./dialog-Dx-d2A6b.js";import{I as N}from"./input-Tv1L73iO.js";import{T as re}from"./textarea-CbfY6rgs.js";import{S as te,a as ie,b as ne,c as oe,d as ce}from"./select-rOePYllV.js";import{u as de}from"./index-Bve5BNz8.js";import{P}from"./pencil-CtJibt0m.js";import{I as le}from"./image-plus-DY_L4AbW.js";import{P as me}from"./plus-CxL6ZB3o.js";/* empty css            */import"./index-B0gXBjpX.js";import"./check-DFbbQ8R1.js";import"./heading-rK8wV4GB.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],he=q("UserPlus",xe),A=({seller:a,countries:h})=>{const t=!!a,[r,u]=f.useState(!1),[S,w]=f.useState((a==null?void 0:a.avatar)??null),[C,p]=f.useState(null),{data:d,setData:i,post:F,processing:_,errors:o,reset:T,setError:E,clearErrors:j}=H({seller_name:(a==null?void 0:a.seller_name)??"",phone:(a==null?void 0:a.phone)??"",avatar:null,description:(a==null?void 0:a.description)??"",country:(a==null?void 0:a.country)??"",address:(a==null?void 0:a.address)??"",_method:t?"patch":void 0});f.useEffect(()=>{r&&(i({seller_name:(a==null?void 0:a.seller_name)??"",phone:(a==null?void 0:a.phone)??"",avatar:null,description:(a==null?void 0:a.description)??"",country:(a==null?void 0:a.country)??"",address:(a==null?void 0:a.address)??"",_method:t?"patch":void 0}),w((a==null?void 0:a.avatar)??null),p(null),j())},[r,a,t,i,j]);const z=B.useCallback((s,g)=>{if(p(null),j("avatar"),g.length>0){const x=g[0].errors[0];x.code==="file-too-large"?p("Avatar must be less than 1MB."):x.code==="file-invalid-type"&&p("Only PNG, JPG, or JPEG files are allowed.");return}if(s.length>0){const x=s[0],v=new FileReader;v.onload=()=>{w(v.result),i("avatar",x)},v.readAsDataURL(x)}},[i,j]),{getRootProps:I,getInputProps:L,isDragActive:k}=de({onDrop:z,maxFiles:1,maxSize:1048576,accept:{"image/png":[],"image/jpg":[],"image/jpeg":[]}}),R=s=>{if(s.preventDefault(),!t&&!d.avatar){E("avatar","A profile picture is required.");return}const g=t?route("carseller.update",a.id):route("carseller.store");F(g,{forceFormData:!0,onSuccess:()=>{u(!1),t||T()}})};return e.jsxs(W,{open:r,onOpenChange:u,children:[e.jsx(Y,{asChild:!0,children:e.jsx(b,{variant:t?"outline":"default",size:t?"icon":"default",children:t?e.jsx(P,{className:"h-4 w-4"}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"mr-2 h-4 w-4"})," Add Seller"]})})}),e.jsxs(Z,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ee,{children:[e.jsx(ae,{children:t?"Edit Seller Profile":"Register New Seller"}),e.jsx(se,{children:"Fill in the seller details. All fields except description are required."})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{...I(),className:"relative cursor-pointer group",children:[e.jsx("input",{...L()}),e.jsx("div",{className:`size-28 rounded-full border-2 border-dashed flex items-center justify-center overflow-hidden bg-gray-50 transition-colors 
                                ${k?"border-primary bg-primary/5":"border-gray-300"}
                                ${o.avatar||C?"border-destructive":"group-hover:border-primary"}
                            `,children:S?e.jsx("img",{src:S,alt:"Avatar",className:"size-full object-cover"}):e.jsx(le,{className:"size-10 text-gray-400"})}),e.jsx("div",{className:"absolute bottom-1 right-1 bg-primary text-white p-1.5 rounded-full border-2 border-white shadow-sm",children:t?e.jsx(P,{className:"size-3"}):e.jsx(me,{className:"size-3"})})]}),e.jsx(l,{className:"text-xs text-gray-500",children:"Seller Avatar (Max 1MB)"}),e.jsx(m,{message:o.avatar||C||""})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"seller_name",children:"Full Name"}),e.jsx(N,{id:"seller_name",value:d.seller_name,onChange:s=>i("seller_name",s.target.value)}),e.jsx(m,{message:o.seller_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"phone",children:"Phone Number"}),e.jsx(N,{id:"phone",value:d.phone,onChange:s=>i("phone",s.target.value)}),e.jsx(m,{message:o.phone})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"country",children:"Country"}),e.jsxs(te,{value:d.country,onValueChange:s=>i("country",s),children:[e.jsx(ie,{children:e.jsx(ne,{placeholder:"Select a country"})}),e.jsx(oe,{children:h.map(s=>e.jsx(ce,{value:s.country_name,children:s.country_name},s.id))})]}),e.jsx(m,{message:o.country})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"address",children:"Address"}),e.jsx(N,{id:"address",value:d.address,onChange:s=>i("address",s.target.value)}),e.jsx(m,{message:o.address})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(re,{id:"description",rows:3,value:d.description,onChange:s=>i("description",s.target.value)}),e.jsx(m,{message:o.description})]}),e.jsx(b,{type:"submit",className:"w-full",disabled:_,children:_?"Saving...":t?"Update Seller":"Create Seller"})]})]})]})},ue=[{title:"Car seller settings",href:"/car/settings/seller"}];function Ie({sellers:a,countries:h}){function t(r){window.confirm("Are you sure you want to delete this seller?")&&M.delete(`/car/settings/seller/${r}`,{preserveScroll:!0,onSuccess:()=>{console.log("Seller deleted successfully!")},onError:u=>{console.error("Error deleting seller:",u),alert("Failed to delete seller. Please try again.")}})}return e.jsxs(X,{breadcrumbs:ue,children:[e.jsx(U,{title:"Seller settings"}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(O,{title:"Car seller settings",description:"Add new, update, and delete car sellers"}),e.jsx(A,{countries:h}),e.jsxs(G,{children:[e.jsx($,{children:"A list of car sellers."}),e.jsx(J,{children:e.jsxs(y,{children:[e.jsx(c,{children:"Seller Name"}),e.jsx(c,{children:"Phone"}),e.jsx(c,{children:"Address"}),e.jsx(c,{children:"Country"}),e.jsx(c,{children:"Created at"}),e.jsx(c,{children:"Last update"}),e.jsx(c,{className:"text-right",children:"Action"})]})}),e.jsx(V,{children:a.length>0?a.map(r=>e.jsxs(y,{children:[e.jsx(n,{className:"font-medium",children:r.seller_name}),e.jsx(n,{children:r.phone}),e.jsx(n,{children:r.address}),e.jsx(n,{children:r.country}),e.jsx(n,{children:D(r.created_at)}),e.jsx(n,{children:D(r.updated_at)}),e.jsx(n,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(A,{countries:h,seller:r}),e.jsx(b,{className:"ml-2",size:"icon",variant:"destructive",onClick:()=>t(r.id),children:e.jsx(K,{className:"h-4 w-4"})})]})})]},r.id)):e.jsx(y,{children:e.jsx(n,{colSpan:8,className:"text-center",children:"No sellers found."})})})]})]})})]})}export{Ie as default};
