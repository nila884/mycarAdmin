import{j as e,r as u,S as x,R as C,L as R}from"./app-CpzzJYWB.js";import{D as p,E as N,u as v,a as D,b as T,f as h,c as y,g as I}from"./index-BPC-Jr6o.js";import{B as f}from"./app-logo-icon-BRdzGFKU.js";import{C as j}from"./checkbox-B9s_Ihtw.js";import{D as M,a as E,b as L,c as S,d as P,X as _,A as z}from"./app-layout-0mdJdW3J.js";import{T as k,a as H,b as m,c as K,d as O,e as b}from"./table-m-fRdkLB.js";import{I as A}from"./input-BqO5v9Q5.js";/* empty css            */import"./index-BI1Ru79l.js";import"./check-DBe1amUb.js";const B=[{id:"select",header:({table:a})=>e.jsx(j,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>a.toggleAllPageRowsSelected(!!t)}),cell:({row:a})=>e.jsx(j,{checked:a.getIsSelected(),onCheckedChange:t=>a.toggleSelected(!!t)}),enableSorting:!1,enableHiding:!1},{id:"name",accessorKey:"name",header:({column:a})=>e.jsx(p,{column:a,title:"Name"})},{id:"email",accessorKey:"email",header:({column:a})=>e.jsx(p,{column:a,title:"Email"})},{id:"roles",accessorKey:"roles",header:({column:a})=>e.jsx(p,{column:a,title:"Roles"}),cell:({getValue:a})=>{const t=a();return t!=null&&t.length?e.jsx("div",{className:"flex flex-wrap gap-1",children:t.map(r=>e.jsx("span",{className:"bg-muted rounded px-2 py-0.5 text-xs font-medium",children:r.name},r.id))}):e.jsx("span",{className:"text-muted-foreground",children:"â€”"})},enableSorting:!1},{id:"created_at",accessorKey:"created_at",header:({column:a})=>e.jsx(p,{column:a,title:"Created at"})},{id:"updated_at",accessorKey:"updated_at",header:({column:a})=>e.jsx(p,{column:a,title:"Last update"})},{id:"actions",enableSorting:!1,cell:()=>e.jsxs(M,{children:[e.jsx(E,{asChild:!0,children:e.jsx(f,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(N,{className:"h-4 w-4"})})}),e.jsxs(L,{align:"end",children:[e.jsx(S,{asChild:!0}),e.jsx(S,{asChild:!0}),e.jsx(P,{})]})]})}];function U({table:a,filters:t}){const[r,i]=u.useState((t==null?void 0:t.search)??""),[o,d]=u.useState((t==null?void 0:t.role)??"all"),c=v(r,500),l=u.useRef(!0);return u.useEffect(()=>{if(l.current){l.current=!1;return}const n=new URL(window.location.href),s=Object.fromEntries(n.searchParams.entries());c?(s.search=c,s.page="1"):delete s.search,o!=="all"?(s.role=o,s.page="1"):delete s.role,x.get(route("user.index"),s,{preserveState:!0,preserveScroll:!0,replace:!0})},[c,o]),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(A,{placeholder:"Search name or email",value:r,onChange:n=>i(n.target.value),className:"w-[250px]"}),(r!==""||o!=="all")&&e.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>{i(""),d("all")},className:"h-8 px-2 lg:px-3",children:["Reset ",e.jsx(_,{className:"ml-2 h-4 w-4"})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(D,{table:a})})]})}function V({columns:a,data:t,serverPagination:r,onServerPageChange:i,filters:o}){const[d,c]=C.useState(o!=null&&o.sort?[{id:String(o.sort),desc:o.direction==="desc"}]:[]),l=T({data:t,columns:a,getCoreRowModel:I(),manualPagination:!0,manualSorting:!0,enableMultiSort:!0,pageCount:r.pageCount,onSortingChange:n=>{const s=typeof n=="function"?n(d):n;c(s);const w=new URL(window.location.href),g=Object.fromEntries(w.searchParams.entries());s.length?(g.sort=s[0].id,g.direction=s[0].desc?"desc":"asc",g.page="1"):(delete g.sort,delete g.direction),x.get(route("user.index"),g,{preserveState:!0,preserveScroll:!0,replace:!0})},onPaginationChange:n=>{const s=typeof n=="function"?n({pageIndex:r.pageIndex,pageSize:r.pageSize}):n;i(s.pageIndex+1,s.pageSize)},state:{sorting:d,pagination:{pageIndex:r.pageIndex,pageSize:r.pageSize}}});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(U,{table:l,filters:o}),e.jsx("div",{className:"rounded-md border bg-white shadow-sm overflow-hidden",children:e.jsxs(k,{children:[e.jsx(H,{className:"bg-slate-50",children:l.getHeaderGroups().map(n=>e.jsx(m,{children:n.headers.map(s=>e.jsx(K,{className:"text-slate-700 font-semibold",children:s.isPlaceholder?null:h(s.column.columnDef.header,s.getContext())},s.id))},n.id))}),e.jsx(O,{children:l.getRowModel().rows.length>0?l.getRowModel().rows.map(n=>e.jsx(m,{className:"hover:bg-slate-50/50",children:n.getVisibleCells().map(s=>e.jsx(b,{children:h(s.column.columnDef.cell,s.getContext())},s.id))},n.id)):e.jsx(m,{children:e.jsx(b,{colSpan:a.length,className:"h-24 text-center text-slate-500 font-medium",children:"No user results found."})})})]})}),e.jsx(y,{table:l})]})}function ee({users:a,filters:t}){const r={pageIndex:a.current_page-1,pageSize:a.per_page,pageCount:a.last_page},i=(o,d)=>{const c=new URL(window.location.href),l=Object.fromEntries(c.searchParams.entries());l.page=String(o),l.per_page=String(d),x.get(route("user.index"),l,{preserveState:!0,preserveScroll:!0,replace:!0})};return e.jsxs(z,{children:[e.jsx(R,{title:"users Listings"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsx(V,{columns:B,data:a.data,serverPagination:r,filters:t,onServerPageChange:i})})]})}export{ee as default};
