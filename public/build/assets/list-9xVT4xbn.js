import{j as e,$ as b,S as p,r as m,R,L as P}from"./app-P_30Ywqc.js";import{D as T,a as I,b as M,c as j,d as k,X as A,A as E}from"./app-layout-DuYsczsc.js";import{D as d,E as L,a as K,b as z}from"./data-table-view-options-C339Z8E9.js";import{B as f}from"./app-logo-icon-D0-bOfxz.js";import{C as w}from"./checkbox-DGbheN4K.js";import{I as U}from"./input-DAF9M8uG.js";import{S as v,a as C,b as N,c as _,d as u}from"./select-D-h1gbiG.js";import{u as O,a as V,f as y,g as B}from"./index-C7WiWO3E.js";import{T as H,a as F,b as S,c as $,d as X,e as D}from"./table-DwB0cqgP.js";/* empty css            */import"./index-COjtLgPO.js";import"./check-Cy2qj5ij.js";const q=[{id:"select",header:({table:a})=>e.jsx(w,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:t=>a.toggleAllPageRowsSelected(!!t)}),cell:({row:a})=>e.jsx(w,{checked:a.getIsSelected(),onCheckedChange:t=>a.toggleSelected(!!t)}),enableSorting:!1,enableHiding:!1},{id:"brand",accessorKey:"version.car_model.brand.brand_name",header:({column:a})=>e.jsx(d,{column:a,title:"Brand"})},{id:"model",accessorKey:"version.car_model.model_name",header:({column:a})=>e.jsx(d,{column:a,title:"Model"})},{id:"price",accessorKey:"price.final_price",header:({column:a})=>e.jsx(d,{column:a,title:"Price"}),cell:({getValue:a})=>{const t=a();return t?e.jsx("div",{className:"text-center font-medium",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}):e.jsx("div",{className:"text-right",children:"N/A"})}},{id:"status",accessorKey:"spect.status",header:({column:a})=>e.jsx(d,{column:a,title:"Status"}),cell:({getValue:a})=>e.jsx("div",{className:"text-center font-medium",children:a()===1?"New":"Used"})},{id:"publication_status",accessorKey:"publication_status",header:({column:a})=>e.jsx(d,{column:a,title:"Publication Status"})},{id:"selling_status",accessorKey:"car_selling_status",header:({column:a})=>e.jsx(d,{column:a,title:"Selling Status"})},{id:"created_at",accessorKey:"created_at",header:({column:a})=>e.jsx(d,{column:a,title:"Created at"})},{id:"updated_at",accessorKey:"updated_at",header:({column:a})=>e.jsx(d,{column:a,title:"Last update"})},{id:"actions",enableSorting:!1,cell:({row:a})=>{const t=a.original,c=()=>{confirm("Are you sure you want to delete this car?")&&p.delete(route("car.destroy",t.id))};return e.jsxs(T,{children:[e.jsx(I,{asChild:!0,children:e.jsx(f,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(L,{className:"h-4 w-4"})})}),e.jsxs(M,{align:"end",children:[e.jsx(j,{asChild:!0,children:e.jsx(b,{href:route("car.show",t.id),children:"Details"})}),e.jsx(j,{asChild:!0,children:e.jsx(b,{href:route("car.edit",t.id),children:"Edit"})}),e.jsx(k,{}),e.jsx(j,{onClick:c,className:"text-red-600",children:"Delete"})]})]})}}];function G({table:a,filters:t}){const[c,g]=m.useState((t==null?void 0:t.search)??""),[l,h]=m.useState((t==null?void 0:t.publication_status)??"all"),[i,o]=m.useState((t==null?void 0:t.car_selling_status)??"all"),n=O(c,500),r=m.useRef(!0);return m.useEffect(()=>{if(r.current){r.current=!1;return}const x=new URL(window.location.href),s=Object.fromEntries(x.searchParams.entries());n?(s.search=n,s.page="1"):delete s.search,l!=="all"?(s.publication_status=l,s.page="1"):delete s.publication_status,i!=="all"?(s.car_selling_status=i,s.page="1"):delete s.car_selling_status,p.get(route(route().current()??"car.index"),s,{preserveState:!0,preserveScroll:!0,replace:!0})},[n,l,i]),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(U,{placeholder:"Search brand or model...",value:c,onChange:x=>g(x.target.value),className:"w-[250px]"}),e.jsxs(v,{value:l,onValueChange:h,children:[e.jsx(C,{className:"w-[180px]",children:e.jsx(N,{placeholder:"Publication status"})}),e.jsxs(_,{children:[e.jsx(u,{value:"all",children:"All statuses"}),e.jsx(u,{value:"published",children:"Published"}),e.jsx(u,{value:"pending",children:"Pending"}),e.jsx(u,{value:"archived",children:"Archived"})]})]}),e.jsxs(v,{value:i,onValueChange:o,children:[e.jsx(C,{className:"w-[180px]",children:e.jsx(N,{placeholder:"Selling status"})}),e.jsxs(_,{children:[e.jsx(u,{value:"all",children:"All "}),e.jsx(u,{value:"selling",children:"Selling"}),e.jsx(u,{value:"reserved",children:"Reserved"}),e.jsx(u,{value:"sold",children:"Sold"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{id:"discounted",checked:!!t.discounted,onCheckedChange:x=>{const s=new URLSearchParams(window.location.search);x?s.set("discounted","1"):s.delete("discounted"),s.set("page","1"),p.get(route(route().current()??"car.index"),Object.fromEntries(s),{preserveState:!0,replace:!0})}}),e.jsx("label",{htmlFor:"discounted",className:"text-sm font-medium leading-none",children:"Discounted only"})]}),(c||l!=="all"||i!=="all")&&e.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>{g(""),h("all"),o("all")},children:["Reset ",e.jsx(A,{className:"ml-2 h-4 w-4"})]}),e.jsx(K,{table:a})]})}function J({columns:a,data:t,serverPagination:c,onServerPageChange:g,filters:l}){const[h,i]=R.useState(l!=null&&l.sort?[{id:String(l.sort),desc:l.direction==="desc"}]:[]),o=V({data:t,columns:a,getCoreRowModel:B(),manualPagination:!0,manualSorting:!0,enableMultiSort:!0,pageCount:c.pageCount,onSortingChange:n=>{const r=typeof n=="function"?n(h):n;i(r);const x=new URL(window.location.href),s=Object.fromEntries(x.searchParams.entries());r.length?(s.sort=r[0].id,s.direction=r[0].desc?"desc":"asc",s.page="1"):(delete s.sort,delete s.direction),p.get(route(route().current()??"car.index"),s,{preserveState:!0,preserveScroll:!0,replace:!0})},onPaginationChange:n=>{const r=typeof n=="function"?n({pageIndex:c.pageIndex,pageSize:c.pageSize}):n;g(r.pageIndex+1,r.pageSize)},state:{sorting:h,pagination:{pageIndex:c.pageIndex,pageSize:c.pageSize}}});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(G,{table:o,filters:l}),e.jsx("div",{className:"rounded-md border bg-white shadow-sm overflow-hidden",children:e.jsxs(H,{children:[e.jsx(F,{className:"bg-slate-50",children:o.getHeaderGroups().map(n=>e.jsx(S,{children:n.headers.map(r=>e.jsx($,{className:"text-slate-700 font-semibold",children:r.isPlaceholder?null:y(r.column.columnDef.header,r.getContext())},r.id))},n.id))}),e.jsx(X,{children:o.getRowModel().rows.length>0?o.getRowModel().rows.map(n=>e.jsx(S,{className:"hover:bg-slate-50/50",children:n.getVisibleCells().map(r=>e.jsx(D,{children:y(r.column.columnDef.cell,r.getContext())},r.id))},n.id)):e.jsx(S,{children:e.jsx(D,{colSpan:a.length,className:"h-24 text-center text-slate-500",children:"No results found."})})})]})}),e.jsx(z,{table:o})]})}function oe({cars:a,filters:t}){const c={pageIndex:a.current_page-1,pageSize:a.per_page,pageCount:a.last_page},g=(l,h)=>{const i=new URL(window.location.href),o=Object.fromEntries(i.searchParams.entries());o.page=String(l),o.per_page=String(h),p.get(route("car.index"),o,{preserveState:!0,preserveScroll:!0,replace:!0})};return e.jsxs(E,{children:[e.jsx(P,{title:"Cars Listings"}),e.jsxs("div",{className:"container mx-auto py-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Vehicle Inventory"}),e.jsx(b,{href:route("car.create"),children:e.jsx(f,{children:"Add New Car"})})]}),e.jsx(J,{columns:q,data:a.data,serverPagination:c,filters:t,onServerPageChange:g})]})]})}export{oe as default};
