import{j as e,r as u,S as m,R as C,L as R}from"./app-D9b7yil5.js";import{D,a as T,b as v,c as h,d as y,X as I,A as N}from"./app-layout-lUKL1h8K.js";import{C as j}from"./checkbox-Dsx9yR5o.js";import{D as g,E,u as L,a as M,b as P,f as S,c as _,g as k}from"./data-table-pagination-DubvfmP_.js";import{B as f}from"./app-logo-icon-BTR4zcqo.js";import{I as z}from"./input-B72JrJ1W.js";import{T as O,a as H,b,c as K,d as A,e as B}from"./table-DsQtr8xT.js";/* empty css            */import"./index-CFDuspEi.js";import"./check-BcQx4ZQH.js";const U=[{id:"select",header:({table:a})=>e.jsx(j,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:s=>a.toggleAllPageRowsSelected(!!s)}),cell:({row:a})=>e.jsx(j,{checked:a.getIsSelected(),onCheckedChange:s=>a.toggleSelected(!!s)}),enableSorting:!1,enableHiding:!1},{id:"name",accessorKey:"name",header:({column:a})=>e.jsx(g,{column:a,title:"Name"})},{id:"email",accessorKey:"email",header:({column:a})=>e.jsx(g,{column:a,title:"Email"})},{id:"roles",accessorKey:"roles",header:({column:a})=>e.jsx(g,{column:a,title:"Roles"}),cell:({getValue:a})=>{const s=a();return s!=null&&s.length?e.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(r=>e.jsx("span",{className:"rounded bg-muted px-2 py-0.5 text-xs font-medium",children:r.name},r.id))}):e.jsx("span",{className:"text-muted-foreground",children:"â€”"})},enableSorting:!1},{id:"created_at",accessorKey:"created_at",header:({column:a})=>e.jsx(g,{column:a,title:"Created at"})},{id:"updated_at",accessorKey:"updated_at",header:({column:a})=>e.jsx(g,{column:a,title:"Last update"})},{id:"actions",enableSorting:!1,cell:({row:a})=>(a.original,e.jsxs(D,{children:[e.jsx(T,{asChild:!0,children:e.jsx(f,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(E,{className:"h-4 w-4"})})}),e.jsxs(v,{align:"end",children:[e.jsx(h,{asChild:!0}),e.jsx(h,{asChild:!0}),e.jsx(y,{})]})]}))}];function V({table:a,filters:s}){const[r,i]=u.useState((s==null?void 0:s.search)??""),[o,d]=u.useState((s==null?void 0:s.role)??"all"),c=L(r,500),l=u.useRef(!0);return u.useEffect(()=>{if(l.current){l.current=!1;return}const n=new URL(window.location.href),t=Object.fromEntries(n.searchParams.entries());c?(t.search=c,t.page="1"):delete t.search,o!=="all"?(t.role=o,t.page="1"):delete t.role,m.get(route("user.index"),t,{preserveState:!0,preserveScroll:!0,replace:!0})},[c,o]),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(z,{placeholder:"Search name or email",value:r,onChange:n=>i(n.target.value),className:"w-[250px]"}),(r||o!=="all")&&e.jsxs(f,{variant:"ghost",onClick:()=>{i(""),d("all")},children:["Reset ",e.jsx(I,{className:"ml-2 h-4 w-4"})]}),e.jsxs("div",{children:[" ",e.jsx(M,{table:a})]})]})}function F({columns:a,data:s,serverPagination:r,onServerPageChange:i,filters:o}){const[d,c]=C.useState(o!=null&&o.sort?[{id:o.sort,desc:o.direction==="desc"}]:[]),l=P({data:s,columns:a,getCoreRowModel:k(),manualPagination:!0,manualSorting:!0,enableMultiSort:!0,pageCount:r.pageCount,onSortingChange:n=>{const t=typeof n=="function"?n(d):n;c(t);const w=new URL(window.location.href),p=Object.fromEntries(w.searchParams.entries());t.length?(p.sort=JSON.stringify(t.map(x=>({id:x.id,desc:x.desc}))),p.page="1"):delete p.sort,m.get(route("user.index"),p,{preserveState:!0,preserveScroll:!0,replace:!0})},onPaginationChange:n=>{const t=typeof n=="function"?n({pageIndex:r.pageIndex,pageSize:r.pageSize}):n;i(t.pageIndex+1,t.pageSize)},state:{sorting:d,pagination:{pageIndex:r.pageIndex,pageSize:r.pageSize}}});return e.jsxs("div",{children:[e.jsx(V,{table:l,filters:o}),e.jsx("div",{className:"rounded-md border my-1",children:e.jsxs(O,{children:[e.jsx(H,{children:l.getHeaderGroups().map(n=>e.jsx(b,{children:n.headers.map(t=>e.jsx(K,{children:t.isPlaceholder?null:S(t.column.columnDef.header,t.getContext())},t.id))},n.id))}),e.jsx(A,{children:l.getRowModel().rows.map(n=>e.jsx(b,{children:n.getVisibleCells().map(t=>e.jsx(B,{children:S(t.column.columnDef.cell,t.getContext())},t.id))},n.id))})]})}),e.jsx(_,{table:l})]})}function ae({users:a,filters:s}){console.log(a);const r={pageIndex:a.current_page-1,pageSize:a.per_page,pageCount:a.last_page},i=(o,d)=>{const c=new URL(window.location.href),l=Object.fromEntries(c.searchParams.entries());l.page=String(o),l.per_page=String(d),m.get(route("user.index"),l,{preserveState:!0,preserveScroll:!0,replace:!0})};return e.jsxs(N,{children:[e.jsx(R,{title:"users Listings"}),e.jsx("div",{className:"container mx-auto py-10",children:e.jsx(F,{columns:U,data:a.data,serverPagination:r,filters:s,onServerPageChange:i})})]})}export{ae as default};
