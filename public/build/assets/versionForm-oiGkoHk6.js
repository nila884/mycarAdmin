import{r as c,m as U,j as e}from"./app-CpzzJYWB.js";import{L as n,I as _}from"./label-DIWS4fZ0.js";import{B as C}from"./app-logo-icon-BRdzGFKU.js";import{D as O,a as z,b as A,c as H,d as R}from"./dialog-IAiCvfs0.js";import{I as b}from"./input-BqO5v9Q5.js";import{S as N,a as V,b as D,c as I,d as E}from"./select-BZy5j78d.js";import{P as X}from"./pencil-Dr_zyYdK.js";import{P as Y}from"./plus-DSd0Nke9.js";const Z=({version:a,carModels:l,brands:B})=>{var u,f;console.log(l);const r=!!a,[i,x]=c.useState(!1),[d,o]=c.useState(""),{data:m,setData:t,post:w,processing:p,errors:h,clearErrors:j,reset:g}=U({_method:r?"patch":void 0,version_name:(a==null?void 0:a.version_name)??"",version_year:((u=a==null?void 0:a.version_year)==null?void 0:u.toString())??"",car_model_id:((f=a==null?void 0:a.car_model_id)==null?void 0:f.toString())??""}),F=c.useMemo(()=>l.filter(s=>s.brand_id.toString()===d),[d,l]);c.useEffect(()=>{var s,S;if(i){const y=l.find(T=>T.id===(a==null?void 0:a.car_model_id)),L=y?y.brand_id.toString():"";o(L),t({_method:r?"patch":void 0,version_name:(a==null?void 0:a.version_name)??"",version_year:((s=a==null?void 0:a.version_year)==null?void 0:s.toString())??"",car_model_id:((S=a==null?void 0:a.car_model_id)==null?void 0:S.toString())??""}),j()}else r||(g(),o(""))},[i,r,a,l,t,j,g]);const P=s=>{s.preventDefault(),w(route(r?"carversion.update":"carversion.store",a==null?void 0:a.id),{onSuccess:()=>x(!1)})};return e.jsxs(O,{open:i,onOpenChange:x,children:[e.jsx(z,{asChild:!0,children:e.jsx(C,{variant:r?"outline":"default",size:r?"icon":"default",children:r?e.jsx(X,{className:"h-4 w-4"}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," Add Version"]})})}),e.jsxs(A,{className:"sm:max-w-[450px]",children:[e.jsx(H,{children:e.jsx(R,{children:r?"Update Version":"Create Version"})}),e.jsxs("form",{onSubmit:P,className:"space-y-4 pt-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"1. Select Brand"}),e.jsxs(N,{value:d,onValueChange:s=>{o(s),t("car_model_id","")},children:[e.jsx(V,{children:e.jsx(D,{placeholder:"Choose a brand..."})}),e.jsx(I,{children:B.map(s=>e.jsx(E,{value:s.id.toString(),children:s.brand_name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"2. Select Model"}),e.jsxs(N,{value:m.car_model_id,onValueChange:s=>t("car_model_id",s),disabled:!d,children:[e.jsx(V,{children:e.jsx(D,{placeholder:d?"Choose a model...":"Select brand first"})}),e.jsx(I,{children:F.map(s=>e.jsx(E,{value:s.id.toString(),children:s.model_name},s.id))})]}),e.jsx(_,{message:h.car_model_id})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"version_name",children:"Version Name"}),e.jsx(b,{id:"version_name",placeholder:"e.g. XLE",value:m.version_name,onChange:s=>t("version_name",s.target.value)}),e.jsx(_,{message:h.version_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"version_year",children:"Year"}),e.jsx(b,{id:"version_year",placeholder:"e.g. 2024",value:m.version_year,onChange:s=>t("version_year",s.target.value)}),e.jsx(_,{message:h.version_year})]})]}),e.jsx(C,{disabled:p,className:"w-full",children:p?"Savingâ€¦":r?"Update Version":"Create Version"})]})]})]})};export{Z as V};
