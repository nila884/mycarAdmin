import{r as K,m as Q,j as e,L as W,S as X}from"./app-D9b7yil5.js";import{A as Y}from"./app-layout-lUKL1h8K.js";import{L as Z}from"./layout-DHpDXm84.js";import{T as f,a as ee,b as S,c as u,d as se,e as g}from"./table-DsQtr8xT.js";import{a as B,B as w}from"./app-logo-icon-BTR4zcqo.js";import{D as ae,a as le,b as ne,c as re,d as ie,e as te}from"./dialog-D1i5YGBp.js";import{I as b}from"./input-B72JrJ1W.js";import{L as i}from"./label-BjwQr2PU.js";import{S as x,a as m,b as h,c as p,d as t}from"./select-p1MIQY3c.js";import{I as O}from"./input-error-s3OvvhyU.js";import{P as ce}from"./pencil-CpbSHt1Z.js";import{P as de,T as oe}from"./trash-2-D5D9zQ_C.js";import{A as xe}from"./anchor-RxqgCmAY.js";import{M as me}from"./map-pin-kGQjFznE.js";import{B as he}from"./building-2-CCpacj7E.js";import{T as pe}from"./truck-B7wlz0Cp.js";/* empty css            */import"./index-CFDuspEi.js";import"./check-BcQx4ZQH.js";import"./heading-DtOTHioi.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]],R=B("Landmark",je);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],ue=B("Navigation",ge),V=({tariff:a,countries:j,ports:y,agencies:_})=>{var k,T,D,I,L,P,A,F;const c=!!a,[n,d]=K.useState(!1),{data:l,setData:r,post:v,patch:N,processing:E,errors:C,reset:$}=Q({from_country_id:((k=a==null?void 0:a.from_country_id)==null?void 0:k.toString())||"",from_port_id:((T=a==null?void 0:a.from_port_id)==null?void 0:T.toString())||"",from_city_id:((D=a==null?void 0:a.from_city_id)==null?void 0:D.toString())||"",country_id:((I=a==null?void 0:a.country)==null?void 0:I.id.toString())||"",to_city_id:((L=a==null?void 0:a.to_city_id)==null?void 0:L.toString())||"",adress_name:(a==null?void 0:a.adress_name)||"",service_type:(a==null?void 0:a.service_type)||"individual_driver",delivery_method:(a==null?void 0:a.delivery_method)||"drive_away",delivery_driver_agency_id:((P=a==null?void 0:a.delivery_driver_agency_id)==null?void 0:P.toString())||"",tarif_per_tone:(a==null?void 0:a.tarif_per_tone)||"",driver_fee:(a==null?void 0:a.driver_fee)||"",clearing_fee:(a==null?void 0:a.clearing_fee)||"",agency_service_fee:(a==null?void 0:a.agency_service_fee)||""}),M=y.filter(s=>s.country_id.toString()===l.from_country_id),H=((A=j.find(s=>s.id.toString()===l.from_country_id))==null?void 0:A.cities)||[],U=((F=j.find(s=>s.id.toString()===l.country_id))==null?void 0:F.cities)||[],z=()=>{const s=Number(l.tarif_per_tone)||0,o=Number(l.clearing_fee)||0,q=l.service_type!=="self_pickup"&&Number(l.driver_fee)||0,J=l.service_type==="agency"&&Number(l.agency_service_fee)||0;return(s+o+q+J).toFixed(2)},G=s=>{var o;s.preventDefault(),c?N(route("delivery-tariffs.update",((o=a==null?void 0:a.id)==null?void 0:o.toString())||""),{onSuccess:()=>d(!1)}):v(route("delivery-tariffs.store"),{onSuccess:()=>{d(!1),$()}})};return e.jsxs(ae,{open:n,onOpenChange:d,children:[e.jsx(le,{asChild:!0,children:e.jsx(w,{variant:c?"ghost":"default",size:c?"icon":"sm",className:"gap-2",children:c?e.jsx(ce,{className:"w-4 h-4"}):e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"w-4 h-4"})," Add Inland Tariff"]})})}),e.jsxs(ne,{className:"sm:max-w-[650px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(re,{children:[e.jsx(ie,{children:c?"Edit Inland Route":"Create New Inland Tariff"}),e.jsx(te,{children:"Define the trucking corridor and service level for this route."})]}),e.jsxs("form",{onSubmit:G,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-sm space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4 text-slate-500"}),e.jsx(i,{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:"Departure (Origin)"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-[10px] text-slate-400",children:"Country"}),e.jsxs(x,{value:l.from_country_id,onValueChange:s=>r(o=>({...o,from_country_id:s,from_port_id:"",from_city_id:""})),children:[e.jsx(m,{className:"bg-white h-8 text-xs",children:e.jsx(h,{placeholder:"Select"})}),e.jsx(p,{children:j.map(s=>e.jsx(t,{value:s.id.toString(),children:s.country_name},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-[10px] text-slate-400",children:"Port (Optional)"}),e.jsxs(x,{value:l.from_port_id,onValueChange:s=>r("from_port_id",s),disabled:!l.from_country_id,children:[e.jsx(m,{className:"bg-white h-8 text-xs",children:e.jsx(h,{placeholder:"Port"})}),e.jsx(p,{children:M.map(s=>e.jsx(t,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-[10px] text-slate-400",children:"City (Optional)"}),e.jsxs(x,{value:l.from_city_id,onValueChange:s=>r("from_city_id",s),disabled:!l.from_country_id,children:[e.jsx(m,{className:"bg-white h-8 text-xs",children:e.jsx(h,{placeholder:"City"})}),e.jsx(p,{children:H.map(s=>e.jsx(t,{value:s.id.toString(),children:s.name},s.id))})]})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-sm space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-slate-500"}),e.jsx(i,{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:"Final Destination"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-[10px] text-slate-400",children:"Country"}),e.jsxs(x,{value:l.country_id,onValueChange:s=>r(o=>({...o,country_id:s,to_city_id:""})),children:[e.jsx(m,{className:"bg-white h-8 text-xs",children:e.jsx(h,{placeholder:"Select"})}),e.jsx(p,{children:j.map(s=>e.jsx(t,{value:s.id.toString(),children:s.country_name},s.id))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-[10px] text-slate-400",children:"Precision City"}),e.jsxs(x,{value:l.to_city_id,onValueChange:s=>r("to_city_id",s),disabled:!l.country_id,children:[e.jsx(m,{className:"bg-white h-8 text-xs",children:e.jsx(h,{placeholder:"Select City"})}),e.jsx(p,{children:U.map(s=>e.jsx(t,{value:s.id.toString(),children:s.name},s.id))})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 p-4 border rounded-sm",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-slate-500"}),e.jsx(i,{className:"text-xs font-bold uppercase",children:"Transport Method"})]}),e.jsxs(x,{value:l.delivery_method,onValueChange:s=>r("delivery_method",s),children:[e.jsx(m,{className:"h-9 text-sm",children:e.jsx(h,{})}),e.jsxs(p,{children:[e.jsx(t,{value:"drive_away",children:"Drive-Away (On-wheels)"}),e.jsx(t,{value:"car_carrier",children:"Car Carrier (Truck)"}),e.jsx(t,{value:"container",children:"Shipping Container"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-slate-500"}),e.jsx(i,{className:"text-xs font-bold uppercase",children:"Service Provider"})]}),e.jsxs(x,{value:l.service_type,onValueChange:s=>r("service_type",s),children:[e.jsx(m,{className:"h-9 text-sm",children:e.jsx(h,{})}),e.jsxs(p,{children:[e.jsx(t,{value:"self_pickup",children:"Self-Pickup (No Driver Fee)"}),e.jsx(t,{value:"individual_driver",children:"Individual Driver"}),e.jsx(t,{value:"agency",children:"Professional Agency"})]})]})]})]}),l.service_type==="agency"&&e.jsxs("div",{className:"p-4 bg-emerald-50/50 border border-emerald-100 rounded-sm space-y-2",children:[e.jsx(i,{className:"text-xs font-bold text-emerald-700",children:"Link to Agency"}),e.jsxs(x,{value:l.delivery_driver_agency_id,onValueChange:s=>r("delivery_driver_agency_id",s),children:[e.jsx(m,{className:"bg-white",children:e.jsx(h,{placeholder:"Select Agency"})}),e.jsx(p,{children:_.filter(s=>s.id!=null).map(s=>e.jsx(t,{value:s.id.toString(),children:s.name},s.id.toString()))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-slate-500"}),e.jsx(i,{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:"Inland Fee Breakdown (USD)"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-[11px]",children:"Trucking/Tone"}),e.jsx(b,{type:"number",value:l.tarif_per_tone,onChange:s=>r("tarif_per_tone",s.target.value)}),e.jsx(O,{message:C.tarif_per_tone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-[11px]",children:"Clearing Fee"}),e.jsx(b,{type:"number",value:l.clearing_fee,onChange:s=>r("clearing_fee",s.target.value)}),e.jsx(O,{message:C.clearing_fee})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-[11px]",children:"Driver Fee"}),e.jsx(b,{type:"number",value:l.driver_fee,onChange:s=>r("driver_fee",s.target.value),disabled:l.service_type==="self_pickup"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-[11px]",children:"Agency Fee"}),e.jsx(b,{type:"number",value:l.agency_service_fee,onChange:s=>r("agency_service_fee",s.target.value),disabled:l.service_type!=="agency"})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-md flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-blue-900",children:"Estimated Total Route Cost:"}),e.jsxs("span",{className:"text-lg font-mono font-bold text-blue-700",children:["$",z()]})]}),e.jsx(w,{type:"submit",className:"w-full",disabled:E,children:c?"Update Corridor Tariff":"Save Inland Route"})]})]})]})};function Ee({delivery_tariffs:a,countries:j,ports:y,agencies:_}){const c=n=>{if(n==null)return;const d=typeof n=="string"?Number(n):n;confirm("Are you sure you want to delete this delivery tariff?")&&X.delete(route("delivery-tariffs.destroy",d))};return e.jsxs(Y,{children:[e.jsx(W,{title:"Delivery & Inland Tariffs"}),e.jsxs(Z,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Inland & Operational Fees"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage trucking rates, driver fees, and border clearing costs."})]}),e.jsx(V,{countries:j,ports:y,agencies:_})]}),e.jsx("div",{className:"rounded-md border bg-white overflow-hidden",children:e.jsxs(f,{children:[e.jsx(ee,{className:"bg-slate-50",children:e.jsxs(S,{children:[e.jsx(u,{className:"w-[250px]",children:"Destination"}),e.jsx(u,{children:"Gateway (Origin)"}),e.jsx(u,{children:"Trucking Leg"}),e.jsx(u,{children:"Driver Fee"}),e.jsx(u,{children:"Clearing Fee"}),e.jsx(u,{className:"text-right",children:"Actions"})]})}),e.jsx(se,{children:a.length>0?a.map(n=>{var d,l,r,v,N;return e.jsxs(S,{className:"hover:bg-slate-50/50",children:[e.jsx(g,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:((d=n.to_city)==null?void 0:d.name)||n.adress_name}),e.jsx("span",{className:"text-xs text-slate-500",children:(l=n.country)==null?void 0:l.country_name})]})}),e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.from_port_id?e.jsx(R,{className:"w-3 h-3 text-orange-500"}):e.jsx(pe,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:((r=n.origin_port)==null?void 0:r.name)||((v=n.from_city)==null?void 0:v.name)||((N=n.origin_country)==null?void 0:N.country_name)||"Standard Route"})]})}),e.jsx(g,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-mono text-blue-700 font-bold",children:["$",n.tarif_per_tone]}),e.jsx("span",{className:"text-[10px] uppercase text-slate-400 font-bold",children:"Per Tone"})]})}),e.jsx(g,{children:e.jsxs("span",{className:"font-mono text-slate-600",children:["$",n.driver_fee]})}),e.jsx(g,{children:e.jsxs("span",{className:"font-mono text-slate-600",children:["$",n.clearing_fee]})}),e.jsx(g,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(V,{tariff:n,countries:j,ports:y,agencies:_}),e.jsx(w,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-red-600",onClick:()=>c(n.id),children:e.jsx(oe,{className:"w-4 h-4"})})]})})]},n.id)}):e.jsx(S,{children:e.jsx(g,{colSpan:6,className:"h-32 text-center text-slate-500",children:"No inland tariffs defined. Start by adding a route gateway."})})})]})})]})]})}export{Ee as default};
