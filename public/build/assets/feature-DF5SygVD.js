import{r as j,m as U,R as B,j as e,L as H,S as F}from"./app-CpzzJYWB.js";import{H as $}from"./heading-small-C21NelVd.js";import{a as M,B as g,t as C}from"./app-logo-icon-BRdzGFKU.js";import{T as G,f as O,a as X,b as N,c,d as q,e as l}from"./table-m-fRdkLB.js";import{A as J,X as K}from"./app-layout-0mdJdW3J.js";import{S as Q}from"./layout-DeUCJ5CU.js";import{L as u,I as v}from"./label-DIWS4fZ0.js";import{D as V,a as W,b as Y,c as Z,d as ee,e as se}from"./dialog-IAiCvfs0.js";import{I as re}from"./input-BqO5v9Q5.js";import{S as ae}from"./switch-DF2nf84Q.js";import{T as ie}from"./textarea-aL6wR0HB.js";import{u as te}from"./index-CBTUa_wd.js";import{P as ne}from"./pencil-Dr_zyYdK.js";import{P as le}from"./plus-DSd0Nke9.js";import{I as oe}from"./image-plus-P2w_zxfh.js";/* empty css            */import"./index-BI1Ru79l.js";import"./check-DBe1amUb.js";import"./heading-aKTEqoiW.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],de=M("CircleX",ce),D=({feature:s})=>{const a=!!s,[r,t]=j.useState(!1),[f,y]=j.useState((s==null?void 0:s.icon)??null),[_,d]=j.useState(null),{data:x,setData:n,post:S,processing:w,errors:p,reset:P,setError:T,clearErrors:h}=U({feature_name:(s==null?void 0:s.feature_name)??"",description:(s==null?void 0:s.description)??"",is_main:(s==null?void 0:s.is_main)??!1,icon:null,_method:a?"patch":void 0,clear_icon:!1});j.useEffect(()=>{r&&(n({feature_name:(s==null?void 0:s.feature_name)??"",description:(s==null?void 0:s.description)??"",is_main:(s==null?void 0:s.is_main)??!1,icon:null,_method:a?"patch":void 0,clear_icon:!1}),y((s==null?void 0:s.icon)??null),d(null),h())},[r,s,a,n,h]);const A=B.useCallback((i,o)=>{if(h("icon"),d(null),o.length>0){const m=o[0].errors[0];m.code==="file-too-large"?d("Icon size must be less than 1MB."):m.code==="file-invalid-type"&&d("Only PNG, JPG, or JPEG files are allowed.");return}if(i.length>0){const m=i[0],b=new FileReader;b.onload=()=>{y(b.result),n(R=>({...R,icon:m,clear_icon:!1}))},b.readAsDataURL(m)}},[n,h]),{getRootProps:I,getInputProps:E,isDragActive:L}=te({onDrop:A,maxFiles:1,maxSize:1048576,accept:{"image/png":[],"image/jpg":[],"image/jpeg":[]}}),z=i=>{i.stopPropagation(),y(null),d(null),n(o=>({...o,icon:null,clear_icon:!0}))},k=i=>{if(i.preventDefault(),!a&&!x.icon){T("icon","An icon is required for new features.");return}const o=a?route("carfeature.update",s.id):route("carfeature.store");S(o,{forceFormData:!0,onSuccess:()=>{t(!1),a||P()}})};return e.jsxs(V,{open:r,onOpenChange:t,children:[e.jsx(W,{asChild:!0,children:e.jsx(g,{variant:a?"outline":"default",size:a?"icon":"default",children:a?e.jsx(ne,{className:"h-4 w-4"}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"mr-2 h-4 w-4"})," Add Feature"]})})}),e.jsxs(Y,{className:"sm:max-w-[500px]",children:[e.jsxs(Z,{children:[e.jsx(ee,{children:a?"Edit Feature":"Create Feature"}),e.jsx(se,{children:a?`Update details for ${s.feature_name}`:"Add a new feature to the car inventory system."})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"feature_name",children:"Feature Name"}),e.jsx(re,{id:"feature_name",value:x.feature_name,onChange:i=>n("feature_name",i.target.value),placeholder:"e.g. Sunroof, Leather Seats"}),e.jsx(v,{message:p.feature_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"description",children:"Description"}),e.jsx(ie,{id:"description",rows:3,value:x.description,onChange:i=>n("description",i.target.value),placeholder:"Briefly describe this feature..."}),e.jsx(v,{message:p.description})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"Main Feature"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display prominently on car details."})]}),e.jsx(ae,{checked:x.is_main,onCheckedChange:i=>n("is_main",i)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Feature Icon"}),e.jsxs("div",{...I(),className:`relative flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed p-6 transition-colors ${L?"border-primary bg-primary/5":"border-gray-300"} ${p.icon||_?"border-destructive bg-destructive/5":""}`,children:[e.jsx("input",{...E()}),f?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:f,alt:"Preview",className:"max-h-[120px] rounded-lg object-contain"}),e.jsx(g,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:z,children:e.jsx(de,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(oe,{className:"size-10 text-gray-400"}),e.jsx("p",{className:"text-xs text-center text-gray-500",children:"Drag icon (Max 1MB)"})]})]}),e.jsx(v,{message:p.icon||_||""})]}),e.jsx(g,{type:"submit",className:"w-full",disabled:w,children:w?"Processing...":a?"Update Feature":"Create Feature"})]})]})]})},me=[{title:"Car Feature settings",href:"/car/settings/feature"}];function Ae({features:s}){function a(r){window.confirm("Are you sure you want to delete this feature?")&&F.delete(route("carfeature.destroy",r),{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error("Delete error:",t)}})}return e.jsxs(J,{breadcrumbs:me,children:[e.jsx(H,{title:"Feature settings"}),e.jsx(Q,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{title:"Car Feature settings",description:"Add new, Update and delete car features name"}),e.jsx(D,{}),e.jsxs(G,{className:"min-w-full",children:[e.jsx(O,{children:"A list of car Features."}),e.jsx(X,{children:e.jsxs(N,{children:[e.jsx(c,{className:"w-[100px]",children:"icon"}),e.jsx(c,{className:"w-[150px]",children:"Feature Name"}),e.jsx(c,{children:"Description"}),e.jsx(c,{children:"Created At"}),e.jsx(c,{children:"Last Update"}),e.jsx(c,{className:"text-right",children:"Action"})]})}),e.jsx(q,{children:s.data.length>0?s.data.map(r=>e.jsxs(N,{children:[e.jsx(l,{children:r.icon?e.jsx("img",{src:r.icon,alt:r.feature_name,className:"h-10 w-10 rounded object-cover"}):e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-gray-200 text-xs text-gray-500",children:"No icon"})}),e.jsx(l,{className:"font-medium",children:r.feature_name.toUpperCase()}),e.jsx(l,{className:"text-sm text-gray-600",children:r.description}),e.jsx(l,{children:C(r.created_at)}),e.jsx(l,{children:C(r.updated_at)}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(D,{feature:r}),e.jsx(g,{className:"ml-2",size:"icon",variant:"destructive",onClick:()=>a(r.id),children:e.jsx(K,{className:"h-4 w-4"})})]})})]},r.id)):e.jsx(N,{children:e.jsx(l,{colSpan:6,className:"text-center",children:"No car features found."})})})]}),s.links&&s.links.length>3&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("nav",{className:"flex rounded-md shadow","aria-label":"Pagination",children:s.links.map((r,t)=>e.jsx("button",{onClick:()=>r.url&&F.get(r.url),disabled:!r.url,className:`relative inline-flex items-center border px-4 py-2 text-sm font-medium ${r.active?"z-10 border-indigo-500 bg-indigo-50 text-indigo-600":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"} ${t===0?"rounded-l-md":""} ${t===s.links.length-1?"rounded-r-md":""} `,dangerouslySetInnerHTML:{__html:r.label}},t))})})]})})]})}export{Ae as default};
