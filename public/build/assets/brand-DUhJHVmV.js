import{r as p,m as P,j as e,L as A,S as E}from"./app-CpzzJYWB.js";import{H as I}from"./heading-small-C21NelVd.js";import{B as g,t as N}from"./app-logo-icon-BRdzGFKU.js";import{T as U,f as H,a as z,b as u,c as i,d as O,e as o}from"./table-m-fRdkLB.js";import{A as R,X as F}from"./app-layout-0mdJdW3J.js";import{S as G}from"./layout-DeUCJ5CU.js";import{L as w,I as _}from"./label-DIWS4fZ0.js";import{D as M,a as $,b as k,c as q,d as J}from"./dialog-IAiCvfs0.js";import{I as X}from"./input-BqO5v9Q5.js";import{u as K}from"./index-CBTUa_wd.js";import{P as Q}from"./pencil-Dr_zyYdK.js";import{I as V}from"./image-plus-P2w_zxfh.js";/* empty css            */import"./index-BI1Ru79l.js";import"./check-DBe1amUb.js";import"./heading-aKTEqoiW.js";const C=({brand:s})=>{const a=!!s,[r,h]=p.useState(!1),[j,f]=p.useState(null),{data:m,setData:l,post:S,processing:b,errors:x,setError:c,clearErrors:d}=P({_method:a?"patch":void 0,brand_name:(s==null?void 0:s.brand_name)??"",logo:null});p.useEffect(()=>{r&&(l({_method:a?"patch":void 0,brand_name:(s==null?void 0:s.brand_name)??"",logo:null}),f((s==null?void 0:s.logo)??null),d())},[r,s,a,l,d]);const y=(t,v)=>{if(d("logo"),v.length>0){const n=v[0].errors[0];n.code==="file-too-large"?c("logo","The image must be less than 1MB."):n.code==="file-invalid-type"&&c("logo","Only PNG, JPG, and JPEG are allowed.");return}if(t.length>0){const n=t[0];f(URL.createObjectURL(n)),l("logo",n)}},{getRootProps:B,getInputProps:D,isDragActive:T}=K({onDrop:y,maxFiles:1,maxSize:1048576,accept:{"image/jpeg":[],"image/png":[],"image/jpg":[]}}),L=t=>{if(t.preventDefault(),!m.brand_name.trim()){c("brand_name","Brand name is required.");return}if(!a&&!m.logo){c("logo","A logo is required for new brands.");return}S(route(a?"carbrand.update":"carbrand.store",s==null?void 0:s.id),{forceFormData:!0,onSuccess:()=>h(!1)})};return e.jsxs(M,{open:r,onOpenChange:h,children:[e.jsx($,{asChild:!0,children:e.jsx(g,{variant:a?"outline":"default",size:a?"icon":"default",children:a?e.jsx(Q,{className:"h-4 w-4"}):"Add Brand"})}),e.jsxs(k,{children:[e.jsx(q,{children:e.jsx(J,{children:a?"Update Brand":"Create Brand"})}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Brand Name"}),e.jsx(X,{value:m.brand_name,onChange:t=>{d("brand_name"),l("brand_name",t.target.value)}}),e.jsx(_,{message:x.brand_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Logo"}),e.jsxs("div",{...B(),className:`cursor-pointer rounded-lg border-2 border-dashed p-6 text-center transition-colors
                                ${T?"border-primary bg-primary/5":"border-gray-200"}
                                ${x.logo?"border-destructive":""}`,children:[e.jsx("input",{...D()}),j?e.jsx("img",{src:j,className:"mx-auto h-24 rounded object-contain",alt:"Preview"}):e.jsxs("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[e.jsx(V,{className:"h-8 w-8"}),e.jsx("span",{className:"text-sm",children:"Click or drag logo (Max 1MB)"})]})]}),e.jsx(_,{message:x.logo})]}),e.jsx(g,{disabled:b,className:"w-full",children:b?"Savingâ€¦":a?"Update Brand":"Create Brand"})]})]})]})},W=[{title:"Car brand settings",href:"/car/settings/brand"}];function ue({brands:s}){function a(r){window.confirm("Are you sure you want to delete this brand?")&&E.delete(`/car/settings/brand/${r}`,{preserveScroll:!0,onSuccess:()=>{}})}return e.jsxs(R,{breadcrumbs:W,children:[e.jsx(A,{title:"Car brand settings"}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(I,{title:"Car brand settings",description:"Add new ,Update and delete car brands name"}),e.jsx(C,{}),e.jsxs(U,{className:"min-w-2xl rounded-md border",children:[e.jsx(H,{children:"A list of car brand."}),e.jsx(z,{children:e.jsxs(u,{children:[e.jsx(i,{className:"w-[100px]",children:"logo"}),e.jsx(i,{className:"w-[100px]",children:"brand name"}),e.jsx(i,{children:"Created at"}),e.jsx(i,{children:"Last update"}),e.jsx(i,{className:"text-right",children:"Action"})]})}),e.jsx(O,{children:s.length>0?s.map(r=>e.jsxs(u,{children:[e.jsx(o,{children:e.jsx("img",{src:r.logo,alt:r.brand_name,className:"h-10 w-10 rounded object-cover"})}),e.jsx(o,{className:"font-medium",children:r.brand_name.toUpperCase()}),e.jsx(o,{children:N(r.created_at)}),e.jsx(o,{children:N(r.updated_at)}),e.jsxs(o,{className:"text-right",children:[e.jsx(C,{brand:r}),e.jsx(g,{className:"ml-2",size:"icon",variant:"destructive",onClick:()=>a(r.id),children:e.jsx(F,{})})]})]},r.id)):e.jsx(u,{children:e.jsx(o,{colSpan:4,className:"text-center",children:"No brands found."})})})]})]})})]})}export{ue as default};
