import{r as K,m as Q,j as e,L as W,S as X}from"./app-6Tb5ZP8Z.js";import{L as i,I as w}from"./label-BCC2L03O.js";import{a as R,B as k}from"./app-logo-icon-DuFZg3_n.js";import{D as Y,a as Z,b as f,c as ee,d as se,e as ae}from"./dialog-Dx-d2A6b.js";import{I as b}from"./input-Tv1L73iO.js";import{S as x,a as m,b as h,c as p,d as c}from"./select-rOePYllV.js";import{S as le}from"./switch-C6WGgjlP.js";import{P as re}from"./pencil-CtJibt0m.js";import{P as ne}from"./plus-CxL6ZB3o.js";import{A as ie}from"./anchor-Dq49JyVQ.js";import{M as ce}from"./map-pin-DqTB1Sti.js";import{B as te}from"./building-2-Gew13b5E.js";import{T as de,a as oe,b as C,c as g,d as xe,e as u}from"./table-BV1WF4_B.js";import{A as me}from"./app-layout-D9kDhLsM.js";import{L as he}from"./layout-CkWxlj5T.js";import{T as pe}from"./truck-DwNVZ4J3.js";import{T as je}from"./trash-2-m9VHYhKS.js";/* empty css            */import"./index-B0gXBjpX.js";import"./check-DFbbQ8R1.js";import"./heading-rK8wV4GB.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]],E=R("Landmark",ue);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],_e=R("Navigation",ge),B=({tariff:a,countries:j,ports:_,agencies:y})=>{var D,I,F,L,P,A,O,V;const t=!!a,[r,d]=K.useState(!1),{data:l,setData:n,post:v,patch:N,processing:T,errors:S,reset:$}=Q({from_country_id:((D=a==null?void 0:a.from_country_id)==null?void 0:D.toString())||"",from_port_id:((I=a==null?void 0:a.from_port_id)==null?void 0:I.toString())||"",from_city_id:((F=a==null?void 0:a.from_city_id)==null?void 0:F.toString())||"",country_id:((L=a==null?void 0:a.country)==null?void 0:L.id.toString())||"",to_city_id:((P=a==null?void 0:a.to_city_id)==null?void 0:P.toString())||"",adress_name:(a==null?void 0:a.adress_name)||"",service_type:(a==null?void 0:a.service_type)||"individual_driver",delivery_method:(a==null?void 0:a.delivery_method)||"drive_away",delivery_driver_agency_id:((A=a==null?void 0:a.delivery_driver_agency_id)==null?void 0:A.toString())||"",tarif_per_tone:(a==null?void 0:a.tarif_per_tone)||"",driver_fee:(a==null?void 0:a.driver_fee)||"",clearing_fee:(a==null?void 0:a.clearing_fee)||"",agency_service_fee:(a==null?void 0:a.agency_service_fee)||"",is_current:(a==null?void 0:a.is_current)??!1}),M=_.filter(s=>s.country_id.toString()===l.from_country_id),H=((O=j.find(s=>s.id.toString()===l.from_country_id))==null?void 0:O.cities)||[],U=((V=j.find(s=>s.id.toString()===l.country_id))==null?void 0:V.cities)||[],z=()=>{const s=Number(l.tarif_per_tone)||0,o=Number(l.clearing_fee)||0,q=l.service_type!=="self_pickup"&&Number(l.driver_fee)||0,J=l.service_type==="agency"&&Number(l.agency_service_fee)||0;return(s+o+q+J).toFixed(2)},G=s=>{var o;s.preventDefault(),t?N(route("delivery-tariffs.update",((o=a==null?void 0:a.id)==null?void 0:o.toString())||""),{onSuccess:()=>d(!1)}):v(route("delivery-tariffs.store"),{onSuccess:()=>{d(!1),$()}})};return e.jsxs(Y,{open:r,onOpenChange:d,children:[e.jsx(Z,{asChild:!0,children:e.jsx(k,{variant:t?"ghost":"default",size:t?"icon":"sm",className:"gap-2",children:t?e.jsx(re,{className:"h-4 w-4"}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4"})," Add Inland Tariff"]})})}),e.jsxs(f,{className:"max-h-[90vh] overflow-y-auto sm:max-w-[650px]",children:[e.jsxs(ee,{children:[e.jsx(se,{children:t?"Edit Inland Route":"Create New Inland Tariff"}),e.jsx(ae,{children:"Define the trucking corridor and service level for this route."})]}),e.jsxs("form",{onSubmit:G,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 rounded-sm bg-gray-50 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-slate-500"}),e.jsx(i,{className:"text-xs font-bold tracking-wider text-slate-500 uppercase",children:"Departure (Origin)"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-[10px] text-slate-400",children:"Country"}),e.jsxs(x,{value:l.from_country_id,onValueChange:s=>n(o=>({...o,from_country_id:s,from_port_id:"",from_city_id:""})),children:[e.jsx(m,{className:"h-8 bg-white text-xs",children:e.jsx(h,{placeholder:"Select"})}),e.jsx(p,{children:j.map(s=>e.jsx(c,{value:s.id.toString(),children:s.country_name},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-[10px] text-slate-400",children:"Port (Optional)"}),e.jsxs(x,{value:l.from_port_id,onValueChange:s=>n("from_port_id",s),disabled:!l.from_country_id,children:[e.jsx(m,{className:"h-8 bg-white text-xs",children:e.jsx(h,{placeholder:"Port"})}),e.jsx(p,{children:M.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-[10px] text-slate-400",children:"City (Optional)"}),e.jsxs(x,{value:l.from_city_id,onValueChange:s=>n("from_city_id",s),disabled:!l.from_country_id,children:[e.jsx(m,{className:"h-8 bg-white text-xs",children:e.jsx(h,{placeholder:"City"})}),e.jsx(p,{children:H.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4 rounded-sm bg-gray-50 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 text-slate-500"}),e.jsx(i,{className:"text-xs font-bold tracking-wider text-slate-500 uppercase",children:"Final Destination"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-[10px] text-slate-400",children:"Country"}),e.jsxs(x,{value:l.country_id,onValueChange:s=>n(o=>({...o,country_id:s,to_city_id:""})),children:[e.jsx(m,{className:"h-8 bg-white text-xs",children:e.jsx(h,{placeholder:"Select"})}),e.jsx(p,{children:j.map(s=>e.jsx(c,{value:s.id.toString(),children:s.country_name},s.id))})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(i,{className:"text-[10px] text-slate-400",children:"Precision City"}),e.jsxs(x,{value:l.to_city_id,onValueChange:s=>n("to_city_id",s),disabled:!l.country_id,children:[e.jsx(m,{className:"h-8 bg-white text-xs",children:e.jsx(h,{placeholder:"Select City"})}),e.jsx(p,{children:U.map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id))})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 rounded-sm border p-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4 text-slate-500"}),e.jsx(i,{className:"text-xs font-bold uppercase",children:"Transport Method"})]}),e.jsxs(x,{value:l.delivery_method,onValueChange:s=>n("delivery_method",s),children:[e.jsx(m,{className:"h-9 text-sm",children:e.jsx(h,{})}),e.jsxs(p,{children:[e.jsx(c,{value:"drive_away",children:"Drive-Away (On-wheels)"}),e.jsx(c,{value:"car_carrier",children:"Car Carrier (Truck)"}),e.jsx(c,{value:"container",children:"Shipping Container"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4 text-slate-500"}),e.jsx(i,{className:"text-xs font-bold uppercase",children:"Service Provider"})]}),e.jsxs(x,{value:l.service_type,onValueChange:s=>n("service_type",s),children:[e.jsx(m,{className:"h-9 text-sm",children:e.jsx(h,{})}),e.jsxs(p,{children:[e.jsx(c,{value:"self_pickup",children:"Self-Pickup (No Driver Fee)"}),e.jsx(c,{value:"individual_driver",children:"Individual Driver"}),e.jsx(c,{value:"agency",children:"Professional Agency"})]})]})]})]}),l.service_type==="agency"&&e.jsxs("div",{className:"space-y-2 rounded-sm border border-emerald-100 bg-emerald-50/50 p-4",children:[e.jsx(i,{className:"text-xs font-bold text-emerald-700",children:"Link to Agency"}),e.jsxs(x,{value:l.delivery_driver_agency_id,onValueChange:s=>n("delivery_driver_agency_id",s),children:[e.jsx(m,{className:"bg-white",children:e.jsx(h,{placeholder:"Select Agency"})}),e.jsx(p,{children:y.filter(s=>s.id!=null).map(s=>e.jsx(c,{value:s.id.toString(),children:s.name},s.id.toString()))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-4 w-4 text-slate-500"}),e.jsx(i,{className:"text-xs font-bold tracking-wider text-slate-500 uppercase",children:"Inland Fee Breakdown (USD)"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-[11px]",children:"Trucking/Tone"}),e.jsx(b,{type:"number",value:l.tarif_per_tone,onChange:s=>n("tarif_per_tone",s.target.value),disabled:l.service_type==="self_pickup"}),e.jsx(w,{message:S.tarif_per_tone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-[11px]",children:"Clearing Fee"}),e.jsx(b,{type:"number",value:l.clearing_fee,onChange:s=>n("clearing_fee",s.target.value)}),e.jsx(w,{message:S.clearing_fee})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-[11px]",children:"Driver Fee"}),e.jsx(b,{type:"number",value:l.driver_fee,onChange:s=>n("driver_fee",s.target.value),disabled:l.service_type==="self_pickup"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-[11px]",children:"Agency Fee"}),e.jsx(b,{type:"number",value:l.agency_service_fee,onChange:s=>n("agency_service_fee",s.target.value),disabled:l.service_type!=="agency"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"is_current",children:"Current price?"}),e.jsx(le,{checked:l.is_current,onCheckedChange:s=>{n("is_current",s)},disabled:T}),e.jsx(w,{message:S.is_current,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between rounded-md bg-blue-50 p-3",children:[e.jsx("span",{className:"text-sm font-bold text-blue-900",children:"Estimated Total Route Cost:"}),e.jsxs("span",{className:"font-mono text-lg font-bold text-blue-700",children:["$",z()]})]}),e.jsx(k,{type:"submit",className:"w-full",disabled:T,children:t?"Update Corridor Tariff":"Save Inland Route"})]})]})]})};function Me({delivery_tariffs:a,countries:j,ports:_,agencies:y}){const t=r=>{if(r==null)return;const d=typeof r=="string"?Number(r):r;confirm("Are you sure you want to delete this delivery tariff?")&&X.delete(route("delivery-tariffs.destroy",d))};return e.jsxs(me,{children:[e.jsx(W,{title:"Delivery & Inland Tariffs"}),e.jsxs(he,{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Inland & Operational Fees"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage trucking rates, driver fees, and border clearing costs."})]}),e.jsx(B,{countries:j,ports:_,agencies:y})]}),e.jsx("div",{className:"overflow-hidden rounded-md border bg-white",children:e.jsxs(de,{children:[e.jsx(oe,{className:"bg-slate-50",children:e.jsxs(C,{children:[e.jsx(g,{className:"w-[250px]",children:"Destination"}),e.jsx(g,{children:"Gateway (Origin)"}),e.jsx(g,{children:"Trucking Leg"}),e.jsx(g,{children:"Driver Fee"}),e.jsx(g,{children:"Clearing Fee"}),e.jsx(g,{className:"text-right",children:"Actions"})]})}),e.jsx(xe,{children:a.length>0?a.map(r=>{var d,l,n,v,N;return e.jsxs(C,{className:"hover:bg-slate-50/50",children:[e.jsx(u,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:((d=r.to_city)==null?void 0:d.name)||r.adress_name}),e.jsx("span",{className:"text-xs text-slate-500",children:(l=r.country)==null?void 0:l.country_name})]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[r.from_port_id?e.jsx(E,{className:"h-3 w-3 text-orange-500"}):e.jsx(pe,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:((n=r.origin_port)==null?void 0:n.name)||((v=r.from_city)==null?void 0:v.name)||((N=r.origin_country)==null?void 0:N.country_name)||"Standard Route"})]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-mono font-bold text-blue-700",children:["$",r.tarif_per_tone]}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Per Tone"})]})}),e.jsx(u,{children:e.jsxs("span",{className:"font-mono text-slate-600",children:["$",r.driver_fee]})}),e.jsx(u,{children:e.jsxs("span",{className:"font-mono text-slate-600",children:["$",r.clearing_fee]})}),e.jsx(u,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(B,{tariff:r,countries:j,ports:_,agencies:y}),e.jsx(k,{variant:"ghost",size:"icon",className:"text-slate-400 hover:text-red-600",onClick:()=>t(r.id),children:e.jsx(je,{className:"h-4 w-4"})})]})})]},r.id)}):e.jsx(C,{children:e.jsx(u,{colSpan:6,className:"h-32 text-center text-slate-500",children:"No inland tariffs defined. Start by adding a route gateway."})})})]})})]})]})}export{Me as default};
