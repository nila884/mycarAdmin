import{r as j,m as k,R as B,j as e,L as H,S as F}from"./app-P_30Ywqc.js";import{H as $}from"./heading-small-CPs3tkTX.js";import{B as g,t as C}from"./app-logo-icon-D0-bOfxz.js";import{T as M,f as G,a as O,b as f,c,d as J,e as l}from"./table-DwB0cqgP.js";import{A as X,X as q}from"./app-layout-DuYsczsc.js";import{S as K}from"./layout-CVLnJCWa.js";import{L as u,I as v}from"./label-BF5kNt9L.js";import{D as Q,a as V,b as W,c as Y,d as Z,e as ee}from"./dialog-CrpZ_p-3.js";import{I as se}from"./input-DAF9M8uG.js";import{S as re}from"./switch-DqjjkU4c.js";import{T as ae}from"./textarea-DQ49Y3T5.js";import{u as ie}from"./index-B3qh2vdp.js";import{P as te}from"./pencil-0Fym70Ww.js";import{P as ne}from"./plus-pACgfdrz.js";import{C as le}from"./circle-x-CQU-oByF.js";import{I as oe}from"./image-plus-BXKWcLJl.js";/* empty css            */import"./index-COjtLgPO.js";import"./check-Cy2qj5ij.js";import"./heading-DeQyy-7-.js";const D=({feature:s})=>{const a=!!s,[r,t]=j.useState(!1),[y,b]=j.useState((s==null?void 0:s.icon)??null),[w,d]=j.useState(null),{data:x,setData:n,post:S,processing:_,errors:p,reset:P,setError:T,clearErrors:h}=k({feature_name:(s==null?void 0:s.feature_name)??"",description:(s==null?void 0:s.description)??"",is_main:(s==null?void 0:s.is_main)??!1,icon:null,_method:a?"patch":void 0,clear_icon:!1});j.useEffect(()=>{r&&(n({feature_name:(s==null?void 0:s.feature_name)??"",description:(s==null?void 0:s.description)??"",is_main:(s==null?void 0:s.is_main)??!1,icon:null,_method:a?"patch":void 0,clear_icon:!1}),b((s==null?void 0:s.icon)??null),d(null),h())},[r,s,a,n,h]);const A=B.useCallback((i,o)=>{if(h("icon"),d(null),o.length>0){const m=o[0].errors[0];m.code==="file-too-large"?d("Icon size must be less than 1MB."):m.code==="file-invalid-type"&&d("Only PNG, JPG, or JPEG files are allowed.");return}if(i.length>0){const m=i[0],N=new FileReader;N.onload=()=>{b(N.result),n(U=>({...U,icon:m,clear_icon:!1}))},N.readAsDataURL(m)}},[n,h]),{getRootProps:E,getInputProps:I,isDragActive:L}=ie({onDrop:A,maxFiles:1,maxSize:1048576,accept:{"image/png":[],"image/jpg":[],"image/jpeg":[]}}),z=i=>{i.stopPropagation(),b(null),d(null),n(o=>({...o,icon:null,clear_icon:!0}))},R=i=>{if(i.preventDefault(),!a&&!x.icon){T("icon","An icon is required for new features.");return}const o=a?route("carfeature.update",s.id):route("carfeature.store");S(o,{forceFormData:!0,onSuccess:()=>{t(!1),a||P()}})};return e.jsxs(Q,{open:r,onOpenChange:t,children:[e.jsx(V,{asChild:!0,children:e.jsx(g,{variant:a?"outline":"default",size:a?"icon":"default",children:a?e.jsx(te,{className:"h-4 w-4"}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"mr-2 h-4 w-4"})," Add Feature"]})})}),e.jsxs(W,{className:"sm:max-w-[500px]",children:[e.jsxs(Y,{children:[e.jsx(Z,{children:a?"Edit Feature":"Create Feature"}),e.jsx(ee,{children:a?`Update details for ${s.feature_name}`:"Add a new feature to the car inventory system."})]}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"feature_name",children:"Feature Name"}),e.jsx(se,{id:"feature_name",value:x.feature_name,onChange:i=>n("feature_name",i.target.value),placeholder:"e.g. Sunroof, Leather Seats"}),e.jsx(v,{message:p.feature_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"description",children:"Description"}),e.jsx(ae,{id:"description",rows:3,value:x.description,onChange:i=>n("description",i.target.value),placeholder:"Briefly describe this feature..."}),e.jsx(v,{message:p.description})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(u,{children:"Main Feature"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display prominently on car details."})]}),e.jsx(re,{checked:x.is_main,onCheckedChange:i=>n("is_main",i)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"Feature Icon"}),e.jsxs("div",{...E(),className:`relative flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed p-6 transition-colors ${L?"border-primary bg-primary/5":"border-gray-300"} ${p.icon||w?"border-destructive bg-destructive/5":""}`,children:[e.jsx("input",{...I()}),y?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:y,alt:"Preview",className:"max-h-[120px] rounded-lg object-contain"}),e.jsx(g,{type:"button",variant:"destructive",size:"icon",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:z,children:e.jsx(le,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(oe,{className:"size-10 text-gray-400"}),e.jsx("p",{className:"text-xs text-center text-gray-500",children:"Drag icon (Max 1MB)"})]})]}),e.jsx(v,{message:p.icon||w||""})]}),e.jsx(g,{type:"submit",className:"w-full",disabled:_,children:_?"Processing...":a?"Update Feature":"Create Feature"})]})]})]})},ce=[{title:"Car Feature settings",href:"/car/settings/feature"}];function Te({features:s}){function a(r){window.confirm("Are you sure you want to delete this feature?")&&F.delete(route("carfeature.destroy",r),{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error("Delete error:",t)}})}return e.jsxs(X,{breadcrumbs:ce,children:[e.jsx(H,{title:"Feature settings"}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{title:"Car Feature settings",description:"Add new, Update and delete car features name"}),e.jsx(D,{}),e.jsxs(M,{className:"min-w-full",children:[e.jsx(G,{children:"A list of car Features."}),e.jsx(O,{children:e.jsxs(f,{children:[e.jsx(c,{className:"w-[100px]",children:"icon"}),e.jsx(c,{className:"w-[150px]",children:"Feature Name"}),e.jsx(c,{children:"Description"}),e.jsx(c,{children:"Created At"}),e.jsx(c,{children:"Last Update"}),e.jsx(c,{className:"text-right",children:"Action"})]})}),e.jsx(J,{children:s.data.length>0?s.data.map(r=>e.jsxs(f,{children:[e.jsx(l,{children:r.icon?e.jsx("img",{src:r.icon,alt:r.feature_name,className:"h-10 w-10 rounded object-cover"}):e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded bg-gray-200 text-xs text-gray-500",children:"No icon"})}),e.jsx(l,{className:"font-medium",children:r.feature_name.toUpperCase()}),e.jsx(l,{className:"text-sm text-gray-600",children:r.description}),e.jsx(l,{children:C(r.created_at)}),e.jsx(l,{children:C(r.updated_at)}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(D,{feature:r}),e.jsx(g,{className:"ml-2",size:"icon",variant:"destructive",onClick:()=>a(r.id),children:e.jsx(q,{className:"h-4 w-4"})})]})})]},r.id)):e.jsx(f,{children:e.jsx(l,{colSpan:6,className:"text-center",children:"No car features found."})})})]}),s.links&&s.links.length>3&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("nav",{className:"flex rounded-md shadow","aria-label":"Pagination",children:s.links.map((r,t)=>e.jsx("button",{onClick:()=>r.url&&F.get(r.url),disabled:!r.url,className:`relative inline-flex items-center border px-4 py-2 text-sm font-medium ${r.active?"z-10 border-indigo-500 bg-indigo-50 text-indigo-600":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"} ${t===0?"rounded-l-md":""} ${t===s.links.length-1?"rounded-r-md":""} `,dangerouslySetInnerHTML:{__html:r.label}},t))})})]})})]})}export{Te as default};
