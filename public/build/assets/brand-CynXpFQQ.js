import{R as _,m as F,j as e,r as u,L as H,S as J}from"./app-D9b7yil5.js";import{H as M}from"./heading-small-BU4M6w1f.js";import{B as c,t as R}from"./app-logo-icon-BTR4zcqo.js";import{D as A,a as I,b as T,c as z,d as U,e as $}from"./dialog-D1i5YGBp.js";import{I as v}from"./input-B72JrJ1W.js";import{u as k}from"./index-P_IZpjLU.js";import{L as y}from"./label-BjwQr2PU.js";import{I as B}from"./input-error-s3OvvhyU.js";import{I as G,C as X}from"./image-plus-DSTDCbWm.js";import{A as q,X as K}from"./app-layout-lUKL1h8K.js";import{S as O}from"./layout-CxIxXWMW.js";import{T as Q,f as V,a as W,b as P,c as h,d as Y,e as d}from"./table-DsQtr8xT.js";/* empty css            */import"./index-CFDuspEi.js";import"./check-BcQx4ZQH.js";import"./heading-DtOTHioi.js";const Z=()=>{const[a,l]=_.useState(null),[s,i]=_.useState(null),{data:j,setData:o,post:b,processing:m,errors:t,reset:w}=F({brand_name:"",logo:null}),g=_.useCallback((n,p)=>{if(n.length>0){const N=n[0],r=new FileReader;r.onload=()=>{l(r.result),o("logo",N),i(null)},r.readAsDataURL(N)}else p.length>0&&(l(null),o("logo",null),i("Image must be less than 1MB and of type png, jpg, or jpeg."))},[o]),{getRootProps:x,getInputProps:C,isDragActive:f}=k({onDrop:g,maxFiles:1,maxSize:1e6,accept:{"image/png":[],"image/jpg":[],"image/jpeg":[]}}),D=n=>{n.preventDefault(),b(route("carbrand.store"),{onSuccess:()=>{w(),l(null),i(null),alert("Brand created successfully!")},onError:p=>{console.error("Submission error:",p)},onFinish:()=>{}})};return e.jsxs(A,{children:[e.jsx(I,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"Add New"})}),e.jsxs(T,{className:"sm:max-w-[500px]",children:[e.jsxs(z,{children:[e.jsx(U,{children:"New Brand"}),e.jsx($,{children:"Create a new car brand."})]}),e.jsxs("form",{onSubmit:D,className:"w-full space-y-6",children:[" ",e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"brand_name",children:"Car brand"}),e.jsx(v,{id:"brand_name",placeholder:"brand name",value:j.brand_name,onChange:n=>o("brand_name",n.target.value),disabled:m}),e.jsx(B,{message:t.brand_name,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"logo",children:"Brand Logo"}),e.jsxs("div",{...x(),className:`flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-lg cursor-pointer
                ${f?"border-primary":"border-gray-300"}
                ${t.logo||s?"border-destructive":""}
              `,children:[e.jsx(v,{id:"logo",type:"file",accept:"image/png, image/jpg, image/jpeg",...C()}),a?e.jsx("img",{src:a,alt:"Brand Logo Preview",className:"max-h-[200px] w-auto object-contain rounded-lg mb-2"}):e.jsx(G,{className:"size-20 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-center text-gray-500",children:f?"Drop the image here...":"Drag 'n' drop an image here, or click to select one"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(PNG, JPG, JPEG up to 1MB)"})]})]}),e.jsx(c,{type:"submit",disabled:m,children:m?"Submitting...":"Submit"})]})]})]})},ee=({brand:a})=>{const[l,s]=u.useState(null),[i,j]=u.useState(null),[o,b]=u.useState(null),{data:m,setData:t,post:w,processing:g,errors:x}=F({_method:"patch",brand_name:a.brand_name,logo:null,clear_logo:!1});u.useEffect(()=>{a.logo&&(s(`/storage/${a.logo}`),b(a.logo))},[a.logo]);const C=u.useCallback((r,E)=>{if(r.length>0){const L=r[0],S=new FileReader;S.onload=()=>{s(S.result),t("logo",L),t("clear_logo",!1),j(null)},S.readAsDataURL(L)}else E.length>0&&(s(o?`/storage/${o}`:null),t("logo",null),j("Image must be less than 1MB and of type png, jpg, or jpeg."))},[t,o]),{getRootProps:f,getInputProps:D,isDragActive:n}=k({onDrop:C,maxFiles:1,maxSize:1e6,accept:{"image/png":[],"image/jpg":[],"image/jpeg":[]}}),p=()=>{s(null),t("logo",null),t("clear_logo",!0),b(null)},N=r=>{r.preventDefault(),w(route("carbrand.update",a.id),{onSuccess:()=>{alert("Brand updated successfully!")},onError:E=>{},onFinish:()=>{}})};return e.jsxs(A,{children:[e.jsx(I,{asChild:!0,children:e.jsx(c,{variant:"outline",size:"sm",children:"Edit"})}),e.jsxs(T,{className:"sm:max-w-[500px]",children:[e.jsxs(z,{children:[e.jsx(U,{children:"Edit Brand"}),e.jsx($,{children:"Edit an existing car brand."})]}),e.jsxs("form",{onSubmit:N,className:"w-full space-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"brand_name",children:"Car brand"}),e.jsx(v,{id:"brand_name",placeholder:"brand name",value:m.brand_name,onChange:r=>t("brand_name",r.target.value),disabled:g}),e.jsx(B,{message:x.brand_name,className:"mt-2"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(y,{htmlFor:"logo",children:"Brand Logo"}),e.jsxs("div",{...f(),className:`relative flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-lg cursor-pointer
                ${n?"border-primary":"border-gray-300"}
                ${x.logo||i?"border-destructive":""}
              `,children:[e.jsx(v,{id:"logo",...D()}),l?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:l,alt:"Brand Logo Preview",className:"max-h-[200px] w-auto object-contain rounded-lg mb-2"}),e.jsx(c,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 rounded-full",onClick:r=>{r.stopPropagation(),p()},children:e.jsx(X,{className:"h-4 w-4"})})]}):e.jsx(G,{className:"size-20 text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-center text-gray-500",children:n?"Drop the image here...":"Drag 'n' drop an image here, or click to select one"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(PNG, JPG, JPEG up to 1MB)"})]}),e.jsx(B,{message:x.logo||i||void 0,className:"mt-2"})]}),e.jsx(c,{type:"submit",disabled:g,children:g?"Updating...":"Update Brand"})]})]})]})},se=[{title:"Car brand settings",href:"/car/settings/brand"}];function be({brands:a}){function l(s){window.confirm("Are you sure you want to delete this brand?")&&J.delete(`/car/settings/brand/${s}`,{preserveScroll:!0,onSuccess:()=>{}})}return e.jsxs(q,{breadcrumbs:se,children:[e.jsx(H,{title:"Car brand settings"}),e.jsx(O,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{title:"Car brand settings",description:"Add new ,Update and delete car brands name"}),e.jsx(Z,{}),e.jsxs(Q,{className:"min-w-2xl border rounded-md",children:[e.jsx(V,{children:"A list of car brand."}),e.jsx(W,{children:e.jsxs(P,{children:[e.jsx(h,{className:"w-[100px]",children:"logo"}),e.jsx(h,{className:"w-[100px]",children:"brand name"}),e.jsx(h,{children:"Created at"}),e.jsx(h,{children:"Last update"}),e.jsx(h,{className:"text-right",children:"Action"})]})}),e.jsx(Y,{children:a.length>0?a.map(s=>e.jsxs(P,{children:[e.jsx(d,{children:e.jsx("img",{src:s.logo,alt:s.brand_name,className:"w-10 h-10 object-cover rounded"})}),e.jsx(d,{className:"font-medium",children:s.brand_name.toUpperCase()}),e.jsx(d,{children:R(s.created_at)}),e.jsx(d,{children:R(s.updated_at)}),e.jsxs(d,{className:"text-right",children:[e.jsx(ee,{brand:s}),e.jsx(c,{className:"ml-2",size:"icon",variant:"destructive",onClick:()=>l(s.id),children:e.jsx(K,{})})]})]},s.id)):e.jsx(P,{children:e.jsx(d,{colSpan:4,className:"text-center",children:"No brands found."})})})]})]})})]})}export{be as default};
